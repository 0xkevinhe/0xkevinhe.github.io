<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Kevin He&#39;s Website | e/acc</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://0xkevinhe.xyz/"/>
  <updated>2024-08-24T16:55:28.365Z</updated>
  <id>https://0xkevinhe.xyz/</id>
  
  <author>
    <name>0xkevinhe</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>monad-megaeth</title>
    <link href="https://0xkevinhe.xyz/monad-megaeth.html"/>
    <id>https://0xkevinhe.xyz/monad-megaeth.html</id>
    <published>2024-08-24T16:45:55.000Z</published>
    <updated>2024-08-24T16:55:28.365Z</updated>
    
    <content type="html"><![CDATA[<h1 id="overview">Overview</h1><p>Recently a bankless spotify epsode about high performant evmblockchain is popular, let's discorver:</p><p><a href="https://open.spotify.com/episode/0jsjx0GqkSQzRvP8qsqD1E?si=37228542c8504962">SpotifyEpisode</a></p><h1 id="takeaways">Takeaways:</h1><h2 id="general">General</h2><ol type="1"><li>High performance can be achieved in various ways: single-threadoptimization / parallel computing; with different expressions.</li><li>Monad's monolithic approach vs. MegaETH's modularity.</li><li>Ethereum settlement + 3rd party data availability (DA) works.</li><li>Crypto should be fun; limited edition strategies for peripheralproducts.</li></ol><h2 id="monad">Monad:</h2><ol type="1"><li>Monad DB / Monad BFT / parallel (async) execution; 100-200validators distributed globally.</li><li>The biggest execution bottleneck is state access.</li><li>Monad emphasizes decentralization, characterized by low-costhardware / validator count / full node count.</li><li>Monad DB is a core innovation, with Merkle tree optimizations.</li><li>Monad uses async execution; decoupled from consensus.</li><li>Monad has community-driven design mascots.</li><li>Currently there is a devnet; mainnet will be fully open-sourcebefore launch.</li><li>Mainnet is expected early next year.</li></ol><figure><img src="./monad-megaeth/monad-mascot.png" alt="monad-mascot"><figcaption aria-hidden="true">monad-mascot</figcaption></figure><h2 id="megaeth">MegaETH:</h2><ol type="1"><li>MegaETH is an ETH Layer 2: sequencer / full node / verifiernode.</li><li>MegaETH uses fraud proofs / eigen data availability (DA).</li><li>MegaETH's verifier uses a stateless client.</li><li>MegaETH is based on Ethereum for decentralization.</li><li>Emphasizes low latency: e.g., real-time games.</li><li>Incubation program: Mega Mafia.</li><li>MegaETH uses Bunny as its mascot.</li><li>Mainnet is expected early next year.</li></ol><figure><img src="./monad-megaeth/megaeth-mascot.png" alt="megaeth-mascot"><figcaption aria-hidden="true">megaeth-mascot</figcaption></figure><h2 id="evm">EVM:</h2><ol type="1"><li>It has a 256-bit width issue, but fundamentally it is sound, withstrong ecosystem and network effects, and it is evolving.</li><li>Vitalik mentioned 3 regrets, including precompiled contracts?</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;overview&quot;&gt;Overview&lt;/h1&gt;
&lt;p&gt;Recently a bankless spotify epsode about high performant evm
blockchain is popular, let&#39;s discorver:&lt;/p&gt;

      
    
    </summary>
    
      <category term="blockchain" scheme="https://0xkevinhe.xyz/categories/blockchain/"/>
    
    
      <category term="blockchain" scheme="https://0xkevinhe.xyz/tags/blockchain/"/>
    
  </entry>
  
  <entry>
    <title>WBTC, It’s Time to Upgrade Your Technical Solutions!</title>
    <link href="https://0xkevinhe.xyz/wbtc.html"/>
    <id>https://0xkevinhe.xyz/wbtc.html</id>
    <published>2024-08-13T01:58:57.000Z</published>
    <updated>2024-08-13T05:12:53.902Z</updated>
    
    <content type="html"><![CDATA[<h1 id="background">Background</h1><p>Recently, there has been widespread community discussion and concernregarding the transfer of control over the <a href="https://x.com/BitGo/status/1821927623494439130">WBTCproject</a>.</p><p>The author has extensive experience in building blockchaininfrastructure, having personally developed centralized wrapped tokensystems and MPC-based custody platforms, and is currently working onbuilding Bitcoin native validation capabilities.</p><p>In this article, the author will review the events, covering theactions and feedback from multiple parties to present the facts. Basedon practical experience in system development, the author has abstracteda simple architecture and security model for wrapped BTC products.</p><p>Subsequently, the author categorizes different technical solutionsaccording to their level of trustlessness, pointing out that thetechnical solutions based on Bitcoin's native validation capabilitiesrepresent the future direction.</p><h1 id="event-review">Event Review</h1><h2 id="involved-parties">Involved Parties</h2><ul><li>WBTC <a href="https://wbtc.network/">https://wbtc.network/</a> WBTChas wrapped over 150K BTC (worth over $9B USD) and displays proof ofreserve on its website.</li><li>Bitgo (Controller of WBTC) <a href="https://x.com/BitGo/status/1821927623494439130">https://x.com/BitGo/status/1821927623494439130</a><a href="https://blog.bitgo.com/bitgo-to-move-wbtc-to-multi-jurisdictional-custody-to-accelerate-global-expansion-plan-2ea0623fa2c8">https://blog.bitgo.com/bitgo-to-move-wbtc-to-multi-jurisdictional-custody-to-accelerate-global-expansion-plan-2ea0623fa2c8</a>Announced that control of the WBTC project will be transferred fromBitGo to an institution related to Justin Sun's BiT Global within 60days.</li></ul><h2 id="related-parties">Related Parties</h2><ul><li><p>MakerDAO (DAI) Risk Management Team <a href="https://x.com/BlockAnalitica">https://x.com/BlockAnalitica</a></p><p><a href="https://forum.makerdao.com/t/wbtc-changes-and-risk-mitigation-10-august-2024/24844?u=mhluongo">https://forum.makerdao.com/t/wbtc-changes-and-risk-mitigation-10-august-2024/24844?u=mhluongo</a>Expressed concern about the transfer of control and indicated that WBTCposes a risk, leading them to reduce exposure in relevantprotocols.</p></li><li><p>Justin Sun (New Controller of WBTC) <a href="https://x.com/justinsuntron/status/1822370692014485937">https://x.com/justinsuntron/status/1822370692014485937</a>Promised not to touch BitGo's reserves.</p></li></ul><h2 id="third-parties">Third Parties</h2><ul><li>Weidai (VC) <a href="https://x.com/_weidai/status/1822338179640218081?s=46&t=d7GvsY4LzVKLbD34L3431w">https://x.com/_weidai/status/1822338179640218081?s=46&t=d7GvsY4LzVKLbD34L3431w</a>Suggested that validating bridges would be a better solution.</li><li>Liufeng (Media) <a href="https://x.com/fishkiller/status/1822455929247498459?s=46&t=h607g0TWNMlmAGBrzTVpyw">https://x.com/fishkiller/status/1822455929247498459?s=46&t=h607g0TWNMlmAGBrzTVpyw</a>Questioned the qualifications of BiT Global.</li></ul><h1 id="business-model-of-wrapped-btc">Business Model of WrappedBTC</h1><p>The business model of Wrapped BTC is quite simple, as shown below:<img src="./wbtc/wrap-model-model.png" alt="model"></p><ul><li><p>Wrap: Represents the conversion from BTC to W-BTC.</p><p>Wrap-house: Represents the operation mechanism of wrapping, ensuringthat the BTC deposited by users is minted as the corresponding W-BTC ona ledger (usually a blockchain, such as ETH), with no more, noless.</p></li><li><p>Unwrap: Represents the conversion from W-BTC to BTC.</p><p>Unwrap-house: Represents the operation mechanism of unwrapping,ensuring that after the user destroys W-BTC, there is a mechanism toallow them to obtain BTC on the Bitcoin network, with no more, noless.</p></li></ul><h1 id="comparison-of-trustless-levels">Comparison of TrustlessLevels</h1><p>There are many dimensions to compare the business and technicalmodels mentioned above. Below, the author will compare the levels oftrustlessness from the perspectives of wrapping and unwrapping.</p><h2 id="non-trustless">Non-Trustless</h2><p>A typical example is the current WBTC by BitGO, where the operationsof the wrap-house and unwrap-house are controlled by BitGo Custody. <img src="./wbtc/wrap-model-bitgo.png" alt="bitgo"></p><p>It is evident that users need to trust that the BitGo Custody serviceprovider will always operate correctly.</p><h2 id="single-way-trustless">Single Way Trustless</h2><p>Next, let’s look at two representative projects that emerged around2020: tBTC/renBTC.</p><figure><img src="./wbtc/wrap-model-tbtc.png" alt="tbtc"><figcaption aria-hidden="true">tbtc</figcaption></figure><p>We can see that on the X-chain (e.g., with complete validationcapability, such as having EVM), the wrap-house can more easily achievea high level of trustlessness.</p><p>However, due to the technical limitations at the time, theunwrap-house could only enhance security through threshold signatures,regardless of the extent of pre-signed signatures.</p><h2 id="dual-way-trustless">Dual Way Trustless</h2><p>Fast forward to 2024, thanks to groundbreaking attempts by teams likeBitVM/Starkware in Bitcoin native validation capabilities (includingfraud proof and validity proof) and the practical implementations bycommunity teams like BitlayerLabs, the unwrap-house is expected toachieve trustlessness.</p><figure><img src="./wbtc/wrap-model-validating.png" alt="validating"><figcaption aria-hidden="true">validating</figcaption></figure><p>Among them, fraud proof is represented by BitVM and its derivativeprojects, which achieve optimistic validation without OP_CAT. Themainstream implementation is the process of commitment and challengeusing ZK validation.</p><p>Validity proof, on the other hand, assumes the existence of OP_CATopcode and directly implements ZK validation. With OP_CAT, locked BTCwill be controlled by so-called covenants (contract-likestructures).</p><h2 id="summary-of-solution-comparisons">Summary of SolutionComparisons</h2><p>A horizontal comparison of the various technical solutions mentionedabove reveals that solutions based on Bitcoin validation capabilities(validation) perform better in terms of trustlessness in bothdirections.</p><table><colgroup><col style="width: 15%"><col style="width: 25%"><col style="width: 28%"><col style="width: 30%"></colgroup><thead><tr class="header"><th>Product</th><th>Wrap-house Trustless</th><th>Unwrap-house Trustless</th><th>Team</th></tr></thead><tbody><tr class="odd"><td>WBTC</td><td>NO</td><td>NO</td><td>BitGO</td></tr><tr class="even"><td>tBTC/renBTC</td><td>High</td><td>Low</td><td>tBTC/renBTC</td></tr><tr class="odd"><td>BitVM/OP_CAT</td><td>High</td><td>High</td><td>BitVM/Starkware/Bitlayer</td></tr></tbody></table><h1 id="conclusion">Conclusion</h1><p>The emergence of WBTC in 2018 marked the beginning of bringing BTCliquidity into the DeFi world. Subsequent projects like tBTC in 2020made some optimizations and improvements. Validation technicalsolutions, represented by Bitcoin's native validation capabilities(fraud proof and validity proof), will perform better in terms ofbidirectional trustlessness.</p><p>WBTC, it’s time to upgrade your technical solutions!</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;background&quot;&gt;Background&lt;/h1&gt;
&lt;p&gt;Recently, there has been widespread community discussion and concern
regarding the transfer of contro
      
    
    </summary>
    
      <category term="blockchain" scheme="https://0xkevinhe.xyz/categories/blockchain/"/>
    
    
      <category term="crypto" scheme="https://0xkevinhe.xyz/tags/crypto/"/>
    
  </entry>
  
  <entry>
    <title>Action And Blink</title>
    <link href="https://0xkevinhe.xyz/action-and-blink.html"/>
    <id>https://0xkevinhe.xyz/action-and-blink.html</id>
    <published>2024-07-04T06:58:57.000Z</published>
    <updated>2024-07-04T07:43:12.970Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概念">概念</h2><p>Action 是一个一组API，定义了输入参数和返回内容。</p><p>Blink 是将 Action 变成一个可供分享的 URL， 进行 UI渲染。</p><figure><img src="./action-and-blink/arch.png" alt="arch"><figcaption aria-hidden="true">arch</figcaption></figure><p>给到用户直接在 Web2 应用中（例如 Twitter）里面与 DApp进行交互的用户体验。</p><h2 id="案例">案例</h2><p>这个案例比较直观：https://x.com/JupiterExchange/status/1807767507874500831</p><p>注意在钱包插件启动或者关闭的情况下区别；</p><figure><img src="./action-and-blink/with-extension.png" alt="with-extension"><figcaption aria-hidden="true">with-extension</figcaption></figure><figure><img src="./action-and-blink/without-extension.png" alt="without-extension"><figcaption aria-hidden="true">without-extension</figcaption></figure><h2 id="问题">问题</h2><p>需要浏览器插件来进行样式渲染，会是一个局限性，目前Phantom/Backpack/dialect 插件支持。</p><h2 id="延展">延展</h2><ol type="1"><li><p>端到端的体验应该延伸到浏览器；</p></li><li><p>可能会衍生的 Action&Blink App Center 的筛选机制；</p></li></ol><h2 id="结论">结论</h2><p>本质是定义了一套区块链的应用层协议，通过浏览器插件的渲染能力，嵌入到各类Web2 应用中，降低用户与链交互的门槛。</p><p>跟 mask.network干的事情类似，浏览器插件的要求会出现「鸡生蛋，蛋生鸡」的问题。</p><p>总体上来讲，提供用户端到端的体验，解决 Web3 到 Web2的最后一公里问题，还是很值得借鉴。</p><h2 id="参考">参考</h2><ul><li>Demo</li></ul><p>https://x.com/JupiterExchange/status/1807767507874500831</p><ul><li>三方解读</li></ul><p>https://x.com/fjun99/status/1805921054503670067</p><p>https://x.com/fjun99/thread/1806857153929732135</p><ul><li>官方</li></ul><p>https://solana.com/solutions/actions</p><p>https://solana.com/docs/advanced/actions</p><p>https://docs.dialect.to/documentation</p><p>https://x.com/saydialect/status/1805588183633346890</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;概念&quot;&gt;概念&lt;/h2&gt;
&lt;p&gt;Action 是一个一组API，定义了输入参数和返回内容。&lt;/p&gt;
&lt;p&gt;Blink 是将 Action 变成一个可供分享的 URL， 进行 UI渲染。&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;./action-and-blin
      
    
    </summary>
    
      <category term="web3" scheme="https://0xkevinhe.xyz/categories/web3/"/>
    
    
      <category term="solana" scheme="https://0xkevinhe.xyz/tags/solana/"/>
    
  </entry>
  
  <entry>
    <title>sigweb3-training</title>
    <link href="https://0xkevinhe.xyz/sigweb3-training-primer.html"/>
    <id>https://0xkevinhe.xyz/sigweb3-training-primer.html</id>
    <published>2024-02-14T15:20:59.000Z</published>
    <updated>2024-02-17T03:35:23.060Z</updated>
    
    <content type="html"><![CDATA[<h1 id="motivation">Motivation</h1><p>Through lecturing and course exercises, help web2 developers:</p><ol type="1"><li><p>Master blockchain and cryptography basic concepts</p></li><li><p>Be able to write contracts</p></li><li><p>Be able to modify blockchain nodes</p></li></ol><h1 id="information">Information</h1><p>Course Github Organization: <a href="https://github.com/sigweb3/">sigweb3</a></p><p>Course Github Repo: <a href="https://github.com/sigweb3/sigweb3-training">sigweb3-training</a></p><p>Course Organization: 1-2 hours per class</p><p>Teaching Method: online</p><h1 id="planning">Planning</h1><h2 id="introductory-courses">Introductory Courses</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Application Intro (1-2 classes)  Fan</span><br><span class="line">Cryptography Intro (1 class) Dr. Lynndell</span><br><span class="line">Blockchain System Intro (1 class)  Nanyan</span><br></pre></td></tr></table></figure><h2 id="advanced-courses">Advanced Courses</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Blockchain System Advanced: Non-EVM compatible chains; Various Ethereum clients and modifications; Layer2 systems;</span><br><span class="line"></span><br><span class="line">Application Advanced: Non-EVM compatible chain contracts; Application security; Large-scale user wallet systems;</span><br><span class="line"></span><br><span class="line">Cryptography Advanced: Cryptographic commitments</span><br></pre></td></tr></table></figure><h2 id="cutting-edge-courses">Cutting-edge Courses</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Blockchain System Cutting-edge: Ethereum iteration path; High-performance public chain; Modularized public chain</span><br><span class="line"></span><br><span class="line">Blockchain Application Cutting-edge: On-chain perpetual contract systems; Economic model courses;</span><br><span class="line"></span><br><span class="line">Cryptography Cutting-edge: ZKP, MPC</span><br></pre></td></tr></table></figure><h1 id="community">Community</h1><p>Find <span class="citation" data-cites="kevinhe0x">@kevinhe0x</span>on Telegram and say hi with: sigweb3 training</p><p>Find <span class="citation" data-cites="elonhe888">@elonhe888</span>on Wechat and say hi with: sigweb3 training</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;motivation&quot;&gt;Motivation&lt;/h1&gt;
&lt;p&gt;Through lecturing and course exercises, help web2 developers:&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;p&gt;Master blockch
      
    
    </summary>
    
      <category term="blockchain" scheme="https://0xkevinhe.xyz/categories/blockchain/"/>
    
    
      <category term="training" scheme="https://0xkevinhe.xyz/tags/training/"/>
    
  </entry>
  
  <entry>
    <title>SIGWeb3 Launches BTC Ecosystem Exploration Project - BTC-EXP</title>
    <link href="https://0xkevinhe.xyz/en-sigweb3-btc-exp-programme.html"/>
    <id>https://0xkevinhe.xyz/en-sigweb3-btc-exp-programme.html</id>
    <published>2023-12-15T06:58:57.000Z</published>
    <updated>2023-12-15T13:17:27.284Z</updated>
    
    <content type="html"><![CDATA[<h1 id="background">Background</h1><p>Several major events in the 2024 Crypto world (e.g. ETF approval/BTChalving) are related to the BTC ecosystem.</p><p>The outbreak of the BTC ecosystem in 2023 has done a good job ofpreheating this narrative ahead of time.</p><p>As an organization that wants to participate deeply in building,SIGWeb3 has decided to initiate the BTC ecosystem exploration project -BTC-EXP (BTC Ecosystem Explorer).</p><h1 id="rationale">Rationale</h1><p>I believe many friends entered the Crypto industry after the BTC eraand may not fully understand the relevant history, technical principles,technical frontiers, etc. of BTC.</p><p>Learning in isolation is inefficient. Exchanging and colliding witheach other advances faster. Based on the actual needs of BTC-relatedprojects that the editorial team is currently working on, severalresearch propositions are given.</p><h1 id="what-you-will-get">What you will get</h1><ol type="1"><li><p>A group of research-loving friends</p></li><li><p>Quickly get into the principles of the BTC ecosystem</p></li><li><p>Excellent research report sharing will have red enveloperewards</p></li></ol><h1 id="hope-you-bring">Hope you bring</h1><ol type="1"><li><p>A serious learning attitude</p></li><li><p>Active research spirit</p></li><li><p>Solid research report summary</p></li><li><p>Wonderful presentation</p></li><li><p>Bring more research topics</p></li></ol><h1 id="programme-details">Programme Details</h1><p>https://sigweb3labs.sg.larksuite.com/wiki/H6ziw8HNeidwBMk4MfPl4E3WgNg</p><h1 id="how-to-join">How to join</h1><p>Add assistant telegram <span class="citation" data-cites="elonhe888">@elonhe888</span> and note "BTC-EXP"</p><h1 id="about-sigweb3">About SigWeb3</h1><p>A special interest group focused on Web3, we pay attention to theforefront of Web3 technology and go down to build.</p><p>Students with theoretical foundation and engineering capabilities arewelcome to join!</p><p>Add telegram group: https://t.me/sigweb3</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;background&quot;&gt;Background&lt;/h1&gt;
&lt;p&gt;Several major events in the 2024 Crypto world (e.g. ETF approval/BTC
halving) are related to the BTC 
      
    
    </summary>
    
      <category term="web3" scheme="https://0xkevinhe.xyz/categories/web3/"/>
    
    
      <category term="bitcoin" scheme="https://0xkevinhe.xyz/tags/bitcoin/"/>
    
  </entry>
  
  <entry>
    <title>SIGWeb3 发布BTC 生态探索项目——BTC-EXP</title>
    <link href="https://0xkevinhe.xyz/sigweb3-btc-exp-programme.html"/>
    <id>https://0xkevinhe.xyz/sigweb3-btc-exp-programme.html</id>
    <published>2023-12-14T06:58:57.000Z</published>
    <updated>2023-12-15T13:15:05.921Z</updated>
    
    <content type="html"><![CDATA[<h1 id="background">Background</h1><p>2024 Crypto 世界的几项重大事件（例如ETF 通过/BTC 减半）都与 BTC生态相关。</p><p>2023 年 BTC 生态的爆发很好的提前预热了这个叙事。</p><p>作为要深度参与 build 的组织，SIGWeb3 决定发起 BTC生态探索项目——BTC-EXP（BTC Ecosystem eXPlorer）。</p><h1 id="rationel">Rationel</h1><p>相信很多朋友都是后 BTC 时代进入的 Crypto 行业，对 BTC的相关历史沿革/技术原理/技术前沿等不一定很理解。</p><p>闭门造车学习效率低，相互交流和碰撞进步得更快，编辑组根据手头正在从事的BTC 相关项目的实际需求，给出了若干待研究的命题。</p><h1 id="what-you-will-get">What you will get</h1><ol type="1"><li>一群爱好研究的朋友</li><li>快速深入 BTC 生态相关原理</li><li>优秀研报分享将会有红包奖励</li></ol><h1 id="hope-you-bring">Hope you bring</h1><ol type="1"><li>严肃认真的学习态度</li><li>积极主动的研究精神</li><li>扎实的研究报告总结</li><li>精彩的presentation</li><li>带来更多的研究题目</li></ol><h1 id="programme-detail">Programme Detail</h1><p>https://sigweb3labs.sg.larksuite.com/wiki/H6ziw8HNeidwBMk4MfPl4E3WgNg</p><h1 id="how-to-join">How to join</h1><p>添加小助手「elonhe888」微信号备注「BTC-EXP」。</p><h1 id="about-sigweb3">About SigWeb3</h1><p>有关 Web3 的特别兴趣组，我们关注 Web3 技术前沿，我们下场 build。</p><p>有理论功底和工程能力的同学，欢迎加入！</p><p>添加小助手「elonhe888」微信号备注「加入SigWeb3」。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;background&quot;&gt;Background&lt;/h1&gt;
&lt;p&gt;2024 Crypto 世界的几项重大事件（例如ETF 通过/BTC 减半）都与 BTC
生态相关。&lt;/p&gt;
&lt;p&gt;2023 年 BTC 生态的爆发很好的提前预热了这个叙事。&lt;/p&gt;
&lt;p&gt;作为要深度参
      
    
    </summary>
    
      <category term="web3" scheme="https://0xkevinhe.xyz/categories/web3/"/>
    
    
      <category term="bitcoin" scheme="https://0xkevinhe.xyz/tags/bitcoin/"/>
    
  </entry>
  
  <entry>
    <title>比特币生态分析-建立框架</title>
    <link href="https://0xkevinhe.xyz/bitcoin-ecosystem-overviews.html"/>
    <id>https://0xkevinhe.xyz/bitcoin-ecosystem-overviews.html</id>
    <published>2023-12-11T03:18:16.000Z</published>
    <updated>2023-12-11T15:07:48.034Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言">前言</h1><p>站在 2023 的年末回望，比特币生态的异军突起绝对可以算上 Crypto编年史的一部分。</p><p>从上半年兴起的铭文概念到下半年冒出来的大量比特币Layer2，可谓百花齐放，百家争鸣。</p><p>面对日新月异的比特币生态项目和相关技术，很多朋友（包括笔者）都经历了：看不见--看不起--看不懂--追不上的过程。</p><p>本系列研报，旨在剥开项目表层概念，从技术本质出发，给出这一波繁荣的来龙去脉，进而从技术维度为这些项目划分框架。期望通过信息掌握和框架建立，读者在遇到新项目时能够从技术上快速分析和判断。</p><h1 id="新从何来">新从何来</h1><p>对于比特币扩容的话题读者相信都是耳熟能详了，这里不再赘述，有兴趣可以<a href="https://en.wikipedia.org/wiki/Bitcoin_scalability_problem">自行检索</a>补齐背景知识。</p><p>从整体生态的发展规律来看，首先会出现资产发行的协议，人们会利用发行协议发行大量资产，进而产生应用（兑换/借贷/支付等），大量的应用汇聚起来将会形成一个繁荣的Layer2。</p><p>因此，资产（协议/案例）/Layer2（协议/应用）将是笔者做分析的核心主线，其中<strong>资产协议</strong>和<strong>Layer2 协议</strong>是重点。</p><p>在比特币生态发展的这么多年里面，在各类经典书籍和权威分析文章中提及的比特币生态基本可以归纳为下图:<img src="./bitcoin-ecosystem-overviews/Bitcoin-Ecosystem-Original.png" alt="Bitcoin-Ecosystem-Classic"></p><p>比特币生态的发展日新月异，上述内容已无法涵盖最新发展。然而万事皆有因，作者总结如下。</p><h2 id="新动力何在">新动力何在</h2><ul><li>内因</li></ul><p>经济动力：</p><ol type="1"><li>BTC作为一种有价值易流通的资产，自然应该具有金融属性，但是由于种种原因，BTC@DeFi比例很低，BTC 持有者有参与 DeFi 的诉求。</li><li>2024 年比特币将进入减半周期，矿工的 coinbase收入将会降低，矿工群体有通过更繁荣的生态获得更多收入的诉求。</li></ol><p>技术动力：</p><ol type="1"><li>比特币的最近两次重大升级（SegWit 和Taproot）结合在一起，使得比特币链上本身的处理能力和链下表达空间更大，这也推动了新的资产和新的Layer2 出现。</li><li>客户端验证等技术观念的普及带来了新的方向。</li></ol><ul><li>外因</li></ul><ol type="1"><li>以太坊生态在 DeFi summer 中的繁荣表现和在Layer2上的实践，客观影响着其它公链的发展。</li><li>模块化区块链观念（DA等）和零知识证明技术的落地，为比特币扩容带来了新的思路。</li></ol><p>受到上述动力的驱使，我们可以将上面框架内容更新到最新版本。</p><h1 id="分类概述dec.-2023">分类概述[DEC. 2023]</h1><figure><img src="./bitcoin-ecosystem-overviews/Bitcoin-Ecosystem-New.png" alt="Bitcoin-Ecosystem-New"><figcaption aria-hidden="true">Bitcoin-Ecosystem-New</figcaption></figure><p>在本篇中，作者会尝试知识范畴之内，为每一个子分类以及协议做一些技术概述。后续如果有时间，会再对重点具体的协议做技术分析。</p><h2 id="资产协议">资产协议</h2><p>比特币白皮书定义是一种 P2P支付系统，因此它采用了类似<strong>现金支付和找零</strong>的UTXO模型。</p><figure><img src="./bitcoin-ecosystem-overviews/Bitcoin-TX.png" alt="Bitcoin-TX"><figcaption aria-hidden="true">Bitcoin-TX</figcaption></figure><p>在这笔交易中，Alice 要支付给 Bob 1 BTC。Alice构造交易：输入为 Alice控制的 10 BTC 的UTXO，输出为 Bob 1 BTC 和找零 8.99 BTC，剩余 0.01 BTC是交易费。</p><p>其中输出的 UTXO 可以附带一些额外的信息，例如曾经有人把<a href="https://blockstream.info/tx/e81f708ca09fc93337c3950158c4a4f8a9bcf57176fcee6e2869bc6ac4dc5db5">结婚信息</a>登记到比特币链上：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">OP_RETURN</span><br><span class="line">0.00000000 BTC</span><br><span class="line">TYPEOP_RETURN</span><br><span class="line">SCRIPTPUBKEY (ASM)OP_RETURN OP_PUSHBYTES_27 416c657820616e6420446172696120676f74206d61727269656421</span><br><span class="line">SCRIPTPUBKEY (HEX)6a1b416c657820616e6420446172696120676f74206d61727269656421</span><br><span class="line">OP_RETURN DATAAlex and Daria got married!</span><br></pre></td></tr></table></figure><p>随着比特币的升级，UTXO 中附带信息的方式也有多种，常见的是OP_RETURE，SegWit，Taproot 等。</p><p>比特币网络的代码共识只认可 BTC这一种资产。如果想要借助比特币发行其它的资产，目前大家想到的办法是 UTXO中添加信息，然后在<strong>链下</strong>通过一个程序来解析 UTXO中的额外信息。</p><p>一个例子是，在美元纸币至上建立一个「珍稀」美元收藏协议，描述如下：</p><figure><img src="./bitcoin-ecosystem-overviews/us-dollar.jpeg" alt="us-dollor-collection"><figcaption aria-hidden="true">us-dollor-collection</figcaption></figure><p>以美元编号展开叙事，建立如下 Rare-USD 协议：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">B__03__54__27__54__F</span><br><span class="line">||</span><br><span class="line">H__C1__C2__C3__C4__T</span><br><span class="line"></span><br><span class="line">设定 C1, C2, C3, C4 带有数字 8 的数量越多，珍稀度越高。</span><br><span class="line">这个协议的典型的操作有：铸造/转移。其中铸造是在这个纸币上面做一些特殊标记（可能会有法律问题，只是一个简单例子）。</span><br></pre></td></tr></table></figure><p>可以看到，Rare-USD 协议的一些特质：</p><ol type="1"><li>Layer1（美联储） 不感知这个收藏协议的存在</li><li>在链下（藏家）形成共识，需要有一个索引（共识）系统来保证其正常运作</li></ol><p>上面的框架中的资产协议 Rare-USD 协议没有本质区别，与模块化区块链中的DA（数据可用层）分离也有千丝万缕的关系。</p><p>其中 client-side-verification 是一种更官方的说法，inscription则是社区自发形成的一种称谓。</p><h2 id="layer2-协议">Layer2 协议</h2><p>有了资产协议和相应的资产实例，Layer2 才有存在的价值。</p><h2 id="核心的三个问题">核心的三个问题</h2><p>作者认为，BTC 的 Layer2 核心要回答三个问题：</p><ul><li>资产</li></ul><p>资产是否丰富，是否能实现去中心化跨链，是否有逃生能力。</p><ul><li>执行</li></ul><p>Layer2的状态转移，是否具备图灵完备的虚拟机，用户和开发者是否友好。</p><ul><li>验证</li></ul><p>Layer2 的执行状态，如何自证清白，验证成本多高等。</p><h2 id="layer2-分析框架">Layer2 分析框架</h2><p>本文为Layer2 协议建立如下分析框架，例如：</p><table><colgroup><col style="width: 19%"><col style="width: 15%"><col style="width: 19%"><col style="width: 14%"><col style="width: 14%"><col style="width: 16%"></colgroup><thead><tr class="header"><th style="text-align: left;"><strong>项目</strong></th><th style="text-align: left;">技术路线</th><th style="text-align: left;"><strong>资产安全跨链</strong></th><th><strong>资产逃生</strong></th><th><strong>图灵完备</strong></th><th style="text-align: left;"><strong>L1验证状态</strong></th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Lighting Network</td><td style="text-align: left;">State Channel</td><td style="text-align: left;">YES</td><td>YES</td><td>NO</td><td style="text-align: left;">YES</td></tr><tr class="even"><td style="text-align: left;">Stacks</td><td style="text-align: left;">Side Chain</td><td style="text-align: left;">-</td><td>NO</td><td>YES</td><td style="text-align: left;">NO</td></tr></tbody></table><p>特别值得注意的是 Rollup 类型的 Layer2 出现是亮点。Rollup严格意义上包含 validity 和 sovereign 两种，前者可以实现链上验证。</p><p><strong>BitVM</strong> 作为一个有可能实现 validity rollup的技术方案，将有望真正打开比特币 Layer2 的新篇章。</p><h1 id="总结">总结</h1><p>文章阐述了回顾了比特币生态的历史和创新发展的驱动力，从资产/Layer2协议两个大类出发，尝试为读者建立比特币生态的分析框架。</p><p>无论是资产还是 Layer2协议，理解技术本质最好的办法就是看它们与比特币一层的交互方式，更具体来讲就是UTXO中 input 和 output 的构造。后续将撰文从比特币交易角度分析生态协议。</p><h1 id="比特币生态技术交流群">比特币生态技术交流群</h1><p>SigWeb3 组建 Bitcoin生态技术讨论群，旨在与同仁交流和讨论，共同进步，欢迎加入。添加小助手「elonhe888」微信号备注「BTC 技术讨论」。</p><h1 id="关于-sigweb3-组织">关于 SigWeb3 组织</h1><p>有关 Web3 的特别兴趣组，我们关注 Web3 技术前沿，我们下场 build。</p><p>有理论功底和工程能力的同学，欢迎加入！</p><p>添加小助手「elonhe888」微信号备注「加入SigWeb3」。</p><h1 id="参考文献">参考文献</h1><p>https://www.oreilly.com/library/view/mastering-bitcoin-3rd/9781098150082/https://bitvm.org/bitvm.pdf https://rgb.tech/https://www.drivechain.info/ https://www.dlc.link/https://domo-2.gitbook.io/brc-20-experiment/https://research.web3caff.com/zh/archives/6501</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;前言&quot;&gt;前言&lt;/h1&gt;
&lt;p&gt;站在 2023 的年末回望，比特币生态的异军突起绝对可以算上 Crypto
编年史的一部分。&lt;/p&gt;
&lt;p&gt;从上半年兴起的铭文概念到下半年冒出来的大量比特币
Layer2，可谓百花齐放，百家争鸣。&lt;/p&gt;
&lt;p&gt;面对日新月异的比特币生
      
    
    </summary>
    
      <category term="web3" scheme="https://0xkevinhe.xyz/categories/web3/"/>
    
    
      <category term="bitcoin" scheme="https://0xkevinhe.xyz/tags/bitcoin/"/>
    
  </entry>
  
  <entry>
    <title>Bitcoin Ecosystem Analysis - Establishing a Framework</title>
    <link href="https://0xkevinhe.xyz/en-bitcoin-ecosystem-overviews.html"/>
    <id>https://0xkevinhe.xyz/en-bitcoin-ecosystem-overviews.html</id>
    <published>2023-12-11T03:18:16.000Z</published>
    <updated>2023-12-15T13:12:59.211Z</updated>
    
    <content type="html"><![CDATA[<h1 id="preface">Preface</h1><p>Looking back at the end of 2023, the rise of the Bitcoin ecosystemcan definitely be considered part of the Cryptocurrency chronicles.</p><p>From the inscription concept that arose in the first half of the yearto the large number of Bitcoin Layer2 that emerged in the second half ofthe year, it can be said that all flowers bloomed together and allschools of thought contended.</p><p>Facing the ever-changing Bitcoin ecosystem projects and relatedtechnologies, many friends (including the author) have experienced theprocess of: can't see - look down on - don't understand - can't keepup.</p><p>This series of research reports aims to peel off the superficialconcepts of projects and start from the technical essence to give theorigins of this wave of prosperity, and then divide the framework forthese projects from a technical dimension. It is hoped that throughmastering information and establishing frameworks, readers will be ableto quickly analyze and judge new projects technically when theyencounter them.</p><h1 id="where-does-the-new-come-from">Where does the new come from</h1><p>Readers must be familiar with the topic of Bitcoin scalability, so Iwon't repeat it here. If interested, you can <a href="https://en.wikipedia.org/wiki/Bitcoin_scalability_problem">visithere</a> to fill in the background knowledge.</p><p>From the overall ecological development law, asset issuance protocolswill first appear, people will use issuance protocols to issue a largenumber of assets, and then applications (exchange/lending/payment, etc.)will be generated, and a large number of applications will gathertogether. It will form a prosperous Layer2.</p><p>Therefore, assets (protocols/cases)/Layer2 (protocols/applications)will be the core theme for the author's analysis, of which <strong>Assetprotocols</strong> and <strong>Layer2 protocols</strong> are thefocus.</p><p>In the many years of Bitcoin ecosystem development, the Bitcoinecosystem mentioned in various classic books and authoritative analysisarticles can be summarized as the following figure:</p><figure><img src="./bitcoin-ecosystem-overviews/Bitcoin-Ecosystem-Original.png" alt="Bitcoin-Ecosystem-Classic"><figcaption aria-hidden="true">Bitcoin-Ecosystem-Classic</figcaption></figure><p>The development of the Bitcoin ecosystem is changing with eachpassing day. The above content can no longer cover the latestdevelopments. However, everything has a reason. The author summarizes asfollows.</p><h2 id="where-is-the-new-momentum">Where is the new momentum</h2><ul><li>Internal reasons</li></ul><p>Economic motivation:</p><ol type="1"><li><p>As a valuable and liquid asset, BTC naturally should havefinancial attributes, but for various reasons, the ratio of BTC@DeFi isvery low, and BTC holders have the appeal to participate inDeFi.</p></li><li><p>In 2024, Bitcoin will enter the halving cycle, and miners'coinbase income will decrease. Mining groups have the appeal to obtainmore income through a more prosperous ecosystem.</p></li></ol><p>Technical motivation:</p><ol type="1"><li><p>Bitcoin's last two major upgrades (SegWit and Taproot) combinedtogether make the on-chain processing capabilities and off-chainexpression space of the bitcoin chain itself greater, which alsopromotes the emergence of new assets and new Layer2.</p></li><li><p>The popularity of client verification and other technicalconcepts has brought new directions.</p></li></ol><ul><li>External reasons</li></ul><ol type="1"><li><p>The prosperity of the Ethereum ecosystem in the DeFi summer andthe practice on Layer2 have objectively affected the development ofother public chains.</p></li><li><p>The concept of modular blockchains (DA, etc.) and theimplementation of zero-knowledge proof technology have brought new ideasfor Bitcoin expansion.</p></li></ol><p>Driven by the above motivations, we can update the above frameworkcontent to the latest version.</p><h1 id="classification-overview-dec.-2023">Classification Overview [DEC.2023]</h1><figure><img src="./bitcoin-ecosystem-overviews/Bitcoin-Ecosystem-New.png" alt="Bitcoin-Ecosystem-New"><figcaption aria-hidden="true">Bitcoin-Ecosystem-New</figcaption></figure><p>In this article, the author will try to make some technicaldescriptions for each sub-category and protocol within the scope ofknowledge. If time permits in the future, I will do technical analysison specific protocols.</p><h2 id="asset-protocol">Asset Protocol</h2><p>The Bitcoin white paper defines it as a P2P payment system, so itadopts a UTXO model similar to <strong>cash payment andchange</strong>.</p><figure><img src="./bitcoin-ecosystem-overviews/Bitcoin-TX.png" alt="Bitcoin-TX"><figcaption aria-hidden="true">Bitcoin-TX</figcaption></figure><p>In this transaction, Alice wants to pay Bob 1 BTC. Alice constructs atransaction: the input is the 10 BTC UTXO controlled by Alice, and theoutput is 1 BTC to Bob and 8.99 BTC change, with the remaining 0.01 BTCas the transaction fee.</p><p>The UTXOs in the output can carry some additional information, forexample, someone once registered <a href="https://blockstream.info/tx/e81f708ca09fc93337c3950158c4a4f8a9bcf57176fcee6e2869bc6ac4dc5db5">weddinginformation</a> on the bitcoin chain:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">OP_RETURN</span><br><span class="line">0.00000000 BTC</span><br><span class="line">TYPEOP_RETURN</span><br><span class="line">SCRIPTPUBKEY (ASM)OP_RETURN OP_PUSHBYTES_27 416c657820616e6420446172696120676f74206d61727269656421</span><br><span class="line">SCRIPTPUBKEY (HEX)6a1b416c657820616e6420446172696120676f74206d61727269656421</span><br><span class="line">OP_RETURN DATAAlex and Daria got married!</span><br></pre></td></tr></table></figure><p>With the upgrade of Bitcoin, there are also multiple ways to carryinformation in UTXO, commonly used are OP_RETURE, SegWit, Taproot,etc.</p><p>The code consensus of the Bitcoin network only recognizes one assetcalled BTC. If you want to issue other assets by leveraging Bitcoin, theideas people have come up with so far are to add information in theUTXO, and then use an off-chain program to parse the additionalinformation in the UTXO.</p><p>An example is to establish a "rare" US dollar collection protocol ontop of the US dollar supremacy, described as follows:</p><figure><img src="./bitcoin-ecosystem-overviews/us-dollar.jpeg" alt="us-dollor-collection"><figcaption aria-hidden="true">us-dollor-collection</figcaption></figure><p>Unfold the narrative with US dollar numbers and establish thefollowing Rare-USD protocol:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">B__03__54__27__54__F </span><br><span class="line">||</span><br><span class="line">H__C1__C2__C3__C4__T</span><br><span class="line"></span><br><span class="line">Set the more numbers with 8 in C1, C2, C3, C4, the rarer. </span><br><span class="line">Typical operations for this protocol are minting/transferring. Where minting is making some special marks on the banknote (may have legal issues, just a simple example).</span><br></pre></td></tr></table></figure><p>It can be seen that some characteristics of the Rare-USDprotocol:</p><ol type="1"><li>Layer1 (Federal Reserve) is not aware of the existence of thiscollectible protocol<br></li><li>An off-chain consensus needs to be formed (collectors) to ensure itsnormal operation</li></ol><p>The asset protocol Rare-USD protocol described above has no essentialdifference from the framework, and it is also closely related to theseparation of DA (data availability layer) in modular blockchains.</p><p>Client-side-verification is a more official term, while inscriptionis a term coined by the community.</p><h2 id="layer2-protocol">Layer2 Protocol</h2><p>The existence value of Layer2 depends on the asset protocol andcorresponding asset instances.</p><h3 id="the-three-core-issues">The three core issues</h3><p>The author believes that the core of Bitcoin's Layer2 needs to answerthree questions:</p><ul><li>Assets</li></ul><p>Whether the assets are abundant, whether they can achievedecentralized cross-chain, and whether they have escapecapabilities.</p><ul><li>Execution</li></ul><p>The state transition of Layer2, whether it has a Turing-completevirtual machine, and whether it is user and developer friendly.</p><ul><li>Validation</li></ul><p>How Layer2's execution state can prove innocence, verification costs,etc.</p><h3 id="layer2-analysis-framework">Layer2 Analysis Framework</h3><p>This article establishes the following analysis framework for Layer2protocols. For example:</p><table><colgroup><col style="width: 19%"><col style="width: 15%"><col style="width: 19%"><col style="width: 14%"><col style="width: 14%"><col style="width: 16%"></colgroup><thead><tr class="header"><th style="text-align: left;"><strong>Project</strong></th><th style="text-align: left;">Technical Route</th><th style="text-align: left;"><strong>Asset SecurityCross-chain</strong></th><th><strong>Asset Escape</strong></th><th><strong>Turing Complete</strong></th><th style="text-align: left;"><strong>L1 Verify State</strong></th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Lighting Network</td><td style="text-align: left;">State Channel</td><td style="text-align: left;">YES</td><td>YES</td><td>NO</td><td style="text-align: left;">YES</td></tr><tr class="even"><td style="text-align: left;">Stacks</td><td style="text-align: left;">Side Chain</td><td style="text-align: left;">-</td><td>NO</td><td>YES</td><td style="text-align: left;">NO</td></tr></tbody></table><p>It is worth noting in particular that the emergence of Rollup typesof Layer2 is a highlight. Strictly speaking, Rollup contains validityand sovereign types, the former can achieve on-chain verification.</p><p>As a technical solution that can potentially implement validityrollups, <strong>BitVM</strong> will be expected to truly open a newchapter in Bitcoin's Layer2 ecosystem.</p><h1 id="summary">Summary</h1><p>The article reviews the history of the Bitcoin ecosystem and thedriving forces behind innovation and new developments, starting from thetwo major categories of asset/Layer2 protocols, and attempts toestablish an analysis framework for the Bitcoin ecosystem forreaders.</p><p>Whether it is an asset protocol or a Layer2 protocol, the best way tounderstand the technical essence is to look at their interaction withBitcoin's first layer, more specifically, the construction of UTXOinputs and outputs. Subsequent articles will be written to analyzeecosystem protocols from a Bitcoin transaction perspective.</p><h1 id="about-sigweb3-organization">About SigWeb3 Organization</h1><p>A special interest group focused on Web3, we pay attention to theforefront of Web3 technology and go down to build.</p><p>Students with theoretical foundation and engineering capabilities arewelcome to join!</p><p>Add telegram group: https://t.me/sigweb3</p><h1 id="references">References</h1><p>https://www.oreilly.com/library/view/mastering-bitcoin-3rd/9781098150082/https://bitvm.org/bitvm.pdf https://rgb.tech/<br>https://www.drivechain.info/ https://www.dlc.link/https://domo-2.gitbook.io/brc-20-experiment/https://research.web3caff.com/zh/archives/6501</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;preface&quot;&gt;Preface&lt;/h1&gt;
&lt;p&gt;Looking back at the end of 2023, the rise of the Bitcoin ecosystem
can definitely be considered part of the
      
    
    </summary>
    
      <category term="web3" scheme="https://0xkevinhe.xyz/categories/web3/"/>
    
    
      <category term="bitcoin" scheme="https://0xkevinhe.xyz/tags/bitcoin/"/>
    
  </entry>
  
  <entry>
    <title>blockchain-governance</title>
    <link href="https://0xkevinhe.xyz/blockchain-governance.html"/>
    <id>https://0xkevinhe.xyz/blockchain-governance.html</id>
    <published>2022-10-07T00:47:42.000Z</published>
    <updated>2023-09-27T07:37:55.302Z</updated>
    
    <content type="html"><![CDATA[<h1 id="概述">概述</h1><p>BNB Chain 因为官桥被黑，停止工作。</p><ul><li><p>事件官方 Twitterhttps://twitter.com/BNBCHAIN/status/1578148078636650496</p></li><li><p>社区跟踪https://twitter.com/samczsun/thread/1578182840751050752</p></li></ul><h1 id="讨论">讨论</h1><p>去中心化和治理的边界在哪里</p><p>社会共识是什么</p><p>治理的边界在哪里</p><p>是否应该治理</p><p>以什么程序启动治理</p><p>有没有预设方案来更好的治理</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;概述&quot;&gt;概述&lt;/h1&gt;
&lt;p&gt;BNB Chain 因为官桥被黑，停止工作。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;事件官方 Twitter
https://twitter.com/BNBCHAIN/status/1578148078636650496&lt;/p&gt;&lt;/li&gt;

      
    
    </summary>
    
      <category term="blockchain" scheme="https://0xkevinhe.xyz/categories/blockchain/"/>
    
    
      <category term="blockchain" scheme="https://0xkevinhe.xyz/tags/blockchain/"/>
    
  </entry>
  
  <entry>
    <title>web3-nft-overviews</title>
    <link href="https://0xkevinhe.xyz/web3-nft-overviews.html"/>
    <id>https://0xkevinhe.xyz/web3-nft-overviews.html</id>
    <published>2022-07-05T15:07:14.000Z</published>
    <updated>2023-09-27T07:01:22.200Z</updated>
    
    <content type="html"><![CDATA[<p>Last month, we did a small-scale web3 and NFT sharing offline, andthe audience was a group of Tesla owners.</p><p>Considering that most of the audience are non-crypto users, thecontent of the sharing will focus on the overview level, introducingconcepts and specific cases, but also involving some personal practicalwork experience and insights.</p><p>Admittedly, these two topics are still sensitive words in China, so Idon't expect the audience to fully accept my insights, but I do ask themto keep an open mind and be willing to learn about some content that isoffensive to the mainstream media.</p><p>Finally, a word to all bystanders: when the bubble rises, some peoplechoose to be a wise onlooker, others choose to experience it, and whenthe bubble dissipates, the wise reap the wisdom, and the pro-lifers reapthe experience or wealth.</p><p><a href="https://raw.githubusercontent.com/changbinhe/images/master/static/Web3%26NFT-overviews.pdf">PDF</a></p><p>================================================================================================</p><p>上月在线下做了一场小规模的web3和NFT的分享，受众是一个兴趣群的群友。</p><p>考虑到大部分听众都是非链圈或者币圈用户，分享内容会集中在overview层次，介绍概念和具体的case为主，也会涉及到一些个人的实际工作体会和行业判断。</p><p>诚然，这两个话题在国内依然处于准敏感词的状态，我也不强求听众能够完全接受我的见解，但求大家保持一颗开放的心，愿意去了解一些主流媒体所不齿的内容。</p><p>最后，给所有的旁观者一句话，当泡沫起来的时候，有的人选择做一个旁观的智者，另外一些人选择亲身去体验和深入，当泡沫散去，智者收获了智慧，亲历者收获了体验或者财富。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Last month, we did a small-scale web3 and NFT sharing offline, and
the audience was a group of Tesla owners.&lt;/p&gt;
&lt;p&gt;Considering that most
      
    
    </summary>
    
      <category term="web3" scheme="https://0xkevinhe.xyz/categories/web3/"/>
    
    
      <category term="nft" scheme="https://0xkevinhe.xyz/tags/nft/"/>
    
  </entry>
  
  <entry>
    <title>zksync 存储：sparse-merkle-tree 存储</title>
    <link href="https://0xkevinhe.xyz/sparse-merkle-tree.html"/>
    <id>https://0xkevinhe.xyz/sparse-merkle-tree.html</id>
    <published>2021-02-09T12:02:00.000Z</published>
    <updated>2023-09-27T07:01:22.196Z</updated>
    
    <content type="html"><![CDATA[<h1 id="简介">简介</h1><p>本文先介绍了 sparse merkle tree，接下来介绍 zksync 中数据持久化。</p><h1 id="merkle-tree">merkle tree</h1><p><a href="https://en.wikipedia.org/wiki/Merkle_tree">merkle tree</a>常用于区块链存储数据和快速校验数据。其构造特点是叶节点使用数据的 hash进行标记，中间节点使用所有子节点的 hash进行标记。</p><figure><img src="./sparse-merkle-tree/merkle-tree.png" alt="merkle-tree"><figcaption aria-hidden="true">merkle-tree</figcaption></figure><p>对于 merke tree 的操作，包含：插入节点、获取树根、计算 merkle证明、检验 merkle 证明。</p><p>计算 merkle 证明包含：</p><p>1）计算存在证明</p><p>2）计算不存在证明</p><p>在原始的 merkle tree上，很容易生成存在性证明，但是难以生成不存在证明。</p><h1 id="sparse-merkle-tree">sparse merkle tree</h1><p>为了解决这个问题，同时零知识证明也要求账号在树上的位置具有确定性，因此引入sparse merkle tree，有如下特点：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">一棵满二叉树</span><br><span class="line">数据是索引的，每个数据会放到对应的索引的叶子上</span><br><span class="line">存在性证明，merkle path</span><br><span class="line">不存在性证明，需要证明是 null</span><br></pre></td></tr></table></figure><h1 id="优化">优化</h1><p>1）预计算空值哈希</p><p>由于大部分情况下，树并不会真的满，而是非常的稀疏。可以预计算H(null)、H(H(null)|H(null))、H(H(H(null)|H(null))|H(H(null)|H(null)))等层级上的值，达到加速的效果。</p><p>2）并行计算左右子树哈希</p><p>H(H(left)|H(right)) 这类操作要求快速计算左右子树的哈希值，并行计算可以计算。</p><h1 id="实现">实现</h1><p><a href="https://github.com/matter-labs/zksync/blob/master/core/lib/crypto/src/merkle_tree/parallel_smt.rs">rust-matter-labs</a></p><p><a href="https://github.com/iden3/iden3js/blob/master/src/sparse-merkle-tree/sparse-merkle-tree.js">js-iden3</a></p><p><a href="https://github.com/iden3/go-iden3-core/blob/master/merkletree/merkletree.go">golang-iden3</a></p><h1 id="文献参考">文献参考</h1><p><a href="https://medium.com/@kelvinfichter/whats-a-sparse-merkle-tree-acda70aeb837">whats-a-sparse-merkle-tree</a></p><p><a href="https://blog.iden3.io/sparse-merkle-trees-visual-introduction.html">sparse-merkle-trees-visual-introduction</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;简介&quot;&gt;简介&lt;/h1&gt;
&lt;p&gt;本文先介绍了 sparse merkle tree，接下来介绍 zksync 中数据持久化。&lt;/p&gt;
&lt;h1 id=&quot;merkle-tree&quot;&gt;merkle tree&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;https://en.wikip
      
    
    </summary>
    
      <category term="code" scheme="https://0xkevinhe.xyz/categories/code/"/>
    
    
      <category term="zkp" scheme="https://0xkevinhe.xyz/tags/zkp/"/>
    
  </entry>
  
  <entry>
    <title>关于智能钱包</title>
    <link href="https://0xkevinhe.xyz/smart-wallet.html"/>
    <id>https://0xkevinhe.xyz/smart-wallet.html</id>
    <published>2021-01-13T01:58:57.000Z</published>
    <updated>2023-09-27T07:01:22.192Z</updated>
    
    <content type="html"><![CDATA[<p>Vitalik 在 1-11在博客上发表了关于智能钱包的综述。文中介绍了硬件钱包、多签钱包，着重介绍了社交恢复智能钱包，针对社交恢复钱包面临的各方面问题，提出了对应的策略。</p><p>原文不赘述，下文将主要记录要点和思考。</p><h1 id="原文">原文</h1><p><a href="https://vitalik.ca/general/2021/01/11/recovery.html">英文</a></p><p><a href="https://www.chainnews.com/articles/195564221840.htm">中文</a></p><h1 id="要点">要点</h1><h2 id="guardian-的选择">guardian 的选择</h2><p>抵抗 guardian 联合作恶：</p><p>1）不公开</p><ul><li>对 list 进行哈希</li></ul><blockquote><p>fulllist，如何获得？</p></blockquote><ul><li>guardian确定性的生成一个用于恢复的地址；只在需要恢复的时候用到一次；</li></ul><p>2）来自不同的 social circle</p><h2 id="对于加密价值的讨论">对于加密价值的讨论</h2><p>有一种论调认为，社交恢复，是恢复到了相信人，是对区块链和加密的背叛。</p><p>Vitalik认为，加密不是移除所有的信任，其目的是提供更多的选择，来决定去相信谁；允许可控的信任：容许某些人代替做某些事，而没有能力做所有事。</p><h2 id="对抗小偷">对抗小偷</h2><p>sign key 可能丢失，可以增加一个保险柜功能，把 token进入其中；在保险柜中的token，交易可消。在发起交易和交易生效中间，增加了一个可撤回的缓冲期；还可以通过增加vault 的可编程性支持更多的功能。</p><h2 id="argent-和路印等现行社交钱包的两大挑战">Argent和路印等现行社交钱包的两大挑战</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1）对中继的依赖</span><br><span class="line">2）交易费高</span><br></pre></td></tr></table></figure><p>目前的流行做法，是中继官方的签名的在链下进行，收集之后打包发送到服务器；</p><blockquote><p>对于这里的「收集」的概念有一定疑问； 假设一个用户有 7个guardian，路印是收集齐了4 个guardian的签名，才发送到链上？</p></blockquote><h2 id="两大挑战的解决方案">两大挑战的解决方案：</h2><ul><li>当前改造方式</li></ul><p><a href="https://docs.opengsn.org/learn.html">generalizeddecentralized relayer network</a></p><blockquote><p>以太坊加油站（与 heco 的元交易有异曲同工之处）</p></blockquote><p><a href="https://our.status.im/account-abstraction-eip-2938/">allowtransactions to begin from contracts</a></p><blockquote><p>修改以太坊协议，允许合约主动发起交易。</p></blockquote><ul><li>彻底改造方式：迁移到 layer2</li></ul><blockquote><p>为什么能解决问题？资金首先来自 1 层？在二层里面实现智能钱包逻辑？</p></blockquote><h1 id="思考">思考</h1><ol type="1"><li><p>如果是一个定制的链的场景，可以采用更激进的方式来改造链，是否可以定制一个对用户友好的钱包系统？</p></li><li><p>思考免费钱包或者网络可能性，可以使用<a href="https://docs.hecochain.com/#/en-us/dev/meta_tx">原生元交易</a>，对交易费进行补贴。</p></li></ol><h1 id="总结">总结</h1><p>钱包本身存在易用性和安全性的矛盾。公私钥、备份助记词这种操作，对于习惯了只记录一个pin 的 web2.0用户而言不友好，这可能也是阻碍区块链向更大量的用户普及的一部分原因。</p><p>支持社交恢复的智能钱包，免去了用户记录助记词的困难，将安全性托付于社交关系，易用性上有了提升，但是也存在一些问题。Vitalik难得之处在于，不止提出问题，还提供了解决方案的思考。</p><p>当前以太坊社区，开始逐步理解和使用 layer2，将 layer2和智能钱包结合，将有利于以太坊网络向更大体量的用户推广。</p><p>欢迎留言或者联系博主对相关问题讨论！</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Vitalik 在 1-11
在博客上发表了关于智能钱包的综述。文中介绍了硬件钱包、多签钱包，着重介绍了社交恢复智能钱包，针对社交恢复钱包面临的各方面问题，提出了对应的策略。&lt;/p&gt;
&lt;p&gt;原文不赘述，下文将主要记录要点和思考。&lt;/p&gt;
&lt;h1 id=&quot;原文&quot;&gt;原文&lt;/h1
      
    
    </summary>
    
      <category term="blockchain" scheme="https://0xkevinhe.xyz/categories/blockchain/"/>
    
    
      <category term="wallet" scheme="https://0xkevinhe.xyz/tags/wallet/"/>
    
  </entry>
  
  <entry>
    <title>0x协议-介绍</title>
    <link href="https://0xkevinhe.xyz/0x-intro.html"/>
    <id>https://0xkevinhe.xyz/0x-intro.html</id>
    <published>2021-01-01T02:49:05.000Z</published>
    <updated>2023-09-27T07:01:22.142Z</updated>
    
    <content type="html"><![CDATA[<h1 id="核心">核心</h1><p>链下撮合（订单簿在链下）、链上结算（资金划转）</p><h1 id="角色">角色</h1><p>maker 挂单者</p><p>taker 吃单者</p><h1 id="实现">实现</h1><ul><li>maker 创建订单信息，签名 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">makerAddress</span><br><span class="line">takerAddress</span><br><span class="line">makerAssetData</span><br><span class="line">takerAssetData</span><br><span class="line">makerAssetAmount</span><br><span class="line">takerAssetAmount</span><br><span class="line">expirationTimeSeconds</span><br><span class="line">fee</span><br><span class="line">...</span><br><span class="line">签名</span><br><span class="line">哈希</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>注意：</p></blockquote><p>takerAddress 是空——直到taker接单</p><ul><li><p>relayer 链下撮合 taker 接受 maker的订单，签名，提交到智能合约</p></li><li><p>链上结算 合约实现资金划转</p></li></ul><h1 id="问题">问题</h1><p>1）maker 如何取消交易</p><p>订单过期</p><p>2）交易效率</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">预先检查</span><br><span class="line">链上成交</span><br></pre></td></tr></table></figure><h1 id="与-uniswap-对比">与 uniswap 对比</h1><p>1）uni 有流动性提供者，一个 pair 的两个 token 都需要提供</p><p>2）uni 的价格是链上发现的</p><p>3）0x 只是交易意愿撮合，用户的资产不需要抵押</p><h1 id="总结">总结</h1><p>0x协议核心是定义了一个「链下撮合，链下成交」的结构，但正式由于分离了链上和链下，其成交效率有一定折扣。</p><p>其后继者 uniswap 是一个整体闭环。</p><h1 id="参考">参考</h1><p><a href="https://0x.org/docs/core-concepts">0x-protocol</a></p><p><a href="https://www.jinse.com/blockchain/247474.html">0x-intro-jnse</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;核心&quot;&gt;核心&lt;/h1&gt;
&lt;p&gt;链下撮合（订单簿在链下）、链上结算（资金划转）&lt;/p&gt;
&lt;h1 id=&quot;角色&quot;&gt;角色&lt;/h1&gt;
&lt;p&gt;maker 挂单者&lt;/p&gt;
&lt;p&gt;taker 吃单者&lt;/p&gt;
&lt;h1 id=&quot;实现&quot;&gt;实现&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;maker 
      
    
    </summary>
    
      <category term="blockchain" scheme="https://0xkevinhe.xyz/categories/blockchain/"/>
    
    
      <category term="defi" scheme="https://0xkevinhe.xyz/tags/defi/"/>
    
  </entry>
  
  <entry>
    <title>《你就是孩子最好的玩具》读书笔记</title>
    <link href="https://0xkevinhe.xyz/reading-emotion-coaching.html"/>
    <id>https://0xkevinhe.xyz/reading-emotion-coaching.html</id>
    <published>2020-10-05T10:05:12.000Z</published>
    <updated>2023-09-27T07:01:22.165Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言">前言</h1><p>随着年纪越大，对自己的认识深入，发现自己很多习惯或者性格的形成，都可以追溯到最早的生活经历。</p><p>人生来就是一张白纸，父母是第一位老师，家庭教育对于塑造一个人的品格，有关键作用。</p><p>在教育这个事情上，说实话，也是战战兢兢，一不留神，就可能把原先的不那么正确的观念带给了孩子。</p><p>这个时候，不能盲目，不能下意识，只能多阅读、多思考、多观察、多实践，或许能减少一些内心的焦虑。</p><p>这是一本儿童教育的书，核心观点是对孩子进行情感引导式教育。作者摒弃了控制式、放任式、奖励式、惩罚式的教育。等等，这都是不对的？感觉颠覆了三观。细读下来，发现奖励和惩罚还是会在，不过占主导的是发挥同理心，进行情感引导和沟通。</p><p>这本书又是一本手册类的书，列举儿童 0-7岁能出现的大部分让家长抓狂的情形再现、原因分析和解决方案，是值得多次翻阅和查找的一本书。</p><h1 id="信息卡片">🏷信息卡片</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">名称：《你就是孩子最好的玩具》</span><br><span class="line">作者: 金伯莉·布雷恩</span><br><span class="line">译者: 夏欣茁</span><br><span class="line">出版年: 2011-8</span><br><span class="line">页数: 191</span><br><span class="line">定价: 29.80元</span><br><span class="line">ISBN: 9787550102996</span><br><span class="line">豆瓣评分：       8.2</span><br><span class="line">起止时间：       2020.10.05--2020.10.05</span><br><span class="line">阅读次数：       1</span><br><span class="line">推荐指数：      🌟🌟🌟🌟</span><br><span class="line">获奖情况：     </span><br></pre></td></tr></table></figure><h1 id="写作背景">🌱写作背景</h1><p>作者是儿童教育专家，最早提出「情感引导式教育」概念，同时也是 2个男孩的母亲。</p><h1 id="原著呈现">📒原著呈现</h1><p>p9你是希望孩子处于对你的恐惧而听从你的建议，还是处于对你的爱戴和尊重而听从你的建议呢？p149 我们唯有甘心忍耐，才可能从刻意逃避转为欣然面对</p><h1 id="书摘批注">🖇书摘&批注</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">p3 情感引导是什么：想孩子传授情感规则，让他们知道如何辨认情感并且以恰当的方式来表达。</span><br><span class="line">懂得辨认和他人的情感，是形成和谐的人际关系的关键。</span><br><span class="line"></span><br><span class="line">p6 常见误区：</span><br><span class="line">1）控制和放任型</span><br><span class="line">2）轻视、低估和否定孩子的感受 </span><br><span class="line">3）采用外部激励和奖赏的手段 </span><br><span class="line">4）以消极后果作为惩罚</span><br><span class="line">小朋友没有去权利生气？不是的，小朋友要学会知道自己是否在生气，为什么生气，如何处理情绪。</span><br><span class="line"></span><br><span class="line">p33 同情的力量</span><br><span class="line">所谓同理心——站在别人角度看问题；对待小朋友，也需要如此。</span><br><span class="line"></span><br><span class="line">p38 情感引导的关键步骤：</span><br><span class="line">1）播下种子——提前预告</span><br><span class="line">2）观察和判断——了解孩子的情况</span><br><span class="line">3）聆听——倾听孩子的感受</span><br><span class="line">4）体察和同情</span><br><span class="line">期前预告接下来要发生的事情，以一种协商的姿态告知孩子，争取他的配合。</span><br><span class="line"></span><br><span class="line">p56 安抚毯、毛绒玩具</span><br><span class="line">作者提到她的孩子对于安抚毯有强烈的依赖。</span><br><span class="line"></span><br><span class="line">p62 不眠之夜</span><br><span class="line">在某些转折点之前，可能会折腾一阵子——例如突然开始说话之前</span><br><span class="line"></span><br><span class="line">p63 带婴儿外出</span><br><span class="line">做好心理建设最重要——孩子不大可能能长时间配合</span><br><span class="line"></span><br><span class="line">p79 为什么打屁股没用</span><br><span class="line">打屁股会影响孩子的学习能力，教唆使用暴力，体罚会造成伤害，打击自信心</span><br><span class="line">因为暴力而屈服，并不是真的理解，也没有主观产生能动性</span><br><span class="line"></span><br><span class="line">p92 奖励无法奏效</span><br><span class="line">核心是孩子应该是靠情感来激励，而不是物质；幸福感只能来源自身；</span><br><span class="line">久而久之，孩子会对奖励有过高的期望或者依赖。</span><br><span class="line">准确的夸赞孩子，而不是使用某种激励手段。</span><br><span class="line"></span><br><span class="line">p96 孩子耍脾气怎么办</span><br><span class="line">不要针锋相对</span><br><span class="line">提前计划，表达对孩子的理解和同情，保持冷静，不去理睬</span><br><span class="line"></span><br><span class="line">p149 无条件的爱</span><br><span class="line">了解自己，了解孩子</span><br></pre></td></tr></table></figure><h1 id="总结感悟">🙋‍♀️总结感悟</h1><ol type="1"><li><p>核心观点是父母与孩子建立良好的沟通和互动关系，理解、疏导孩各类「不良」行为。进而形成亲子之间的感情纽带，教会孩子正确理解和处理自己的情感，成长为一个具有良好社交能力的人。</p></li><li><p>孩子发展是分阶段的，不同孩子的发展又不是完全同步的，因此父母要尊重规律，抛弃不切实际的计划和目标——例如要求2 岁的孩子能安静坐着看电影。</p></li><li><p>作者认为新生儿阶段，应该给与足够的照料，这也是跟李玫瑾的观点类似。</p></li><li><p>2 岁以前，转移注意力的做法是可取的。</p></li><li><p>夸赞的方式：询问孩子自身的感受（你觉得怎么样？），站在主观的角度来观察（我喜欢你穿的衣服），而不是下一个看似客观的定义（你真会穿衣服）。</p></li><li><p>这本书实用性比较强，用了大量的案例来支撑观点。3-4-5章更是针对各类儿童的问题，都给出了分析和对策。</p></li><li><p>教会孩子与大人进行协作。</p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;前言&quot;&gt;前言&lt;/h1&gt;
&lt;p&gt;随着年纪越大，对自己的认识深入，发现自己很多习惯或者性格的形成，都可以追溯到最早的生活经历。&lt;/p&gt;
&lt;p&gt;人生来就是一张白纸，父母是第一位老师，家庭教育对于塑造一个人的品格，有关键作用。&lt;/p&gt;
&lt;p&gt;在教育这个事情上，说实话，也是
      
    
    </summary>
    
      <category term="reading" scheme="https://0xkevinhe.xyz/categories/reading/"/>
    
    
      <category term="education" scheme="https://0xkevinhe.xyz/tags/education/"/>
    
  </entry>
  
  <entry>
    <title>币安链（BC）与币安智能链（BSC）简介</title>
    <link href="https://0xkevinhe.xyz/blockchain-bsc-intro.html"/>
    <id>https://0xkevinhe.xyz/blockchain-bsc-intro.html</id>
    <published>2020-09-19T03:46:03.000Z</published>
    <updated>2023-09-27T07:01:22.149Z</updated>
    
    <content type="html"><![CDATA[<p>本文主要介绍的是中心化交易所币安（binance.com）在区块链上的一些工作，主要是介绍币安链（BC）和币安智能链（BSC），除了综述官方文档之外，也会加入一些个人的看法。</p><h1 id="出发点">出发点</h1><p>总所周知，币安基于Cosmos-SDk 搭建了币安链（Binance Chain，下称BC），并于 2019 年上线了主网。那为什么还要有另外一个智能链（BinanceSmart Chain，下称 BSC）呢。白皮书解释和言外之意都描述下：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1）实际应用要求有更强的可编程性（要有智能合约）</span><br><span class="line">2）保证现有的 dex 的高性能（基于 cosmos-sdk的链交易并发是有瓶颈的）</span><br><span class="line">3）开发者的学习曲线（以太坊的 DApp 生态最完善）</span><br></pre></td></tr></table></figure></p><p>有了以上的需求，采用下面的技术路线和架构几乎是水到渠成。</p><h1 id="设计目标">设计目标</h1><h2 id="设计目标-1">设计目标</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1）BC 为主链，新链是一个独立区块链，对BC的依赖少</span><br><span class="line">2）兼容以太坊生态，保留跟随以太坊升级的可能性（改动越少，越好升级）</span><br></pre></td></tr></table></figure><h2 id="分工和职责">分工和职责</h2><p>为了旧链和新链的合理性，设计了下面的职责和结构。</p><p>BC核心职责： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1）原有的 dex 功能</span><br><span class="line">2）平行链信息， staking 与治理</span><br></pre></td></tr></table></figure> > 平行staking 放在 BC上，也可能是考虑以后还会有别的新链出现~</p><p>BSC 核心职责：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1）运行区块链，输出 staking 和治理依据</span><br><span class="line">2）运行复杂的 DApp</span><br></pre></td></tr></table></figure><p>由于两个链是相对独立的，所以称为是<code>平行链</code>。</p><h1 id="bsc-共识协议">BSC 共识协议</h1><p>BSC 采用了 所谓的 PoSA（Proof of StakedAuthority），你可以认为是以太坊代码中的 Clique 的一个小改动，综合了 PoA和 DPoS 的思路。大致流程是：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1）验证者或者代理人在 BC 上抵押</span><br><span class="line">2）BC 每24 小时重选合法验证者列表（21 个），通过跨链消息传递给 BSC</span><br><span class="line">3）BSC 根据验证者列表，选择节点轮流产块</span><br></pre></td></tr></table></figure><blockquote><p>PoA这个协议只能实现秒级的产块，但是无法实现秒级的确认（finality）。不确定做这个选择是为什么？可能是为了简单？个人认为有点偷懒了，采用基于BFT 的快速确认的共识协议可能会更好。</p></blockquote><p>简单而言，实现了基于 PoS 治理，PoA 产块。</p><p>从区块浏览器观察来看，BC 的区块周期大约1秒 2 个区块（sub-second），BSC 的区块周期是大约 3 秒。</p><p>因为 BC 使用的 tendermint 共识，所以交易确认时间也就是区块周期，BSC使用了是 PoA 共识，如果等待 21 个节点中的 +1/2确认，需要大约30s-1m。</p><h1 id="token">Token</h1><p>设计了在 BC 和 BSC 双向映射和转账的机制。</p><h2 id="token-定义">Token 定义</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">BC：</span><br><span class="line">BEP2</span><br><span class="line">BNB</span><br><span class="line">...</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">BSC：</span><br><span class="line">BEP2E</span><br><span class="line">BNB</span><br></pre></td></tr></table></figure><p>BNB 是两个平行链的 native token，交易手续费、抵押、奖励等都使用BNB。</p><p>BEP2 是 BC 上类似于 ERC20 的 Token。</p><p>BEP2E 是 BSC 上类似于 ERC20 的 Token，多了几个方法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">symbol()</span><br><span class="line">decimals()</span><br><span class="line">onwer() //比较重要，声明拥有者地址，后面只有这个地址可以发起绑定操作</span><br></pre></td></tr></table></figure><p>那核心问题就是Token映射和转账，即：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BEP2 of BC <--?-->BEP2E of BSC </span><br></pre></td></tr></table></figure><h2 id="token-绑定">Token 绑定</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1）确定 BC 上的BEP2和 BSC 上的 BEP2E 存在</span><br><span class="line">2）确定和锁定发行量</span><br><span class="line">  假如总发行量 S，</span><br><span class="line">  BC 初始流通 K</span><br><span class="line">  BSC 初始流通 S-K</span><br><span class="line">token 发行者应该在对应的链上把未流通的量 lock 到系统合约或者账户，使得两个链上的发行总量是 S。</span><br><span class="line">3）BEP2 token 的发行者在 BC 上发起绑定交易</span><br><span class="line">完成检查之后，绑定请求发送到 relayers</span><br><span class="line">4）BSC relayer 将跨链绑定信息转发给 TokenHub 合约</span><br><span class="line">5）BEP2E 的 owner 调用 TokenHub 合约的方法，后者确认 1.未被绑定 2.symbol 发行量和最小数量位 3。锁定正常</span><br><span class="line">6）BC 通过 Oracle 收到返回信息，将 contract address 和 decimal 信息写入 BC</span><br></pre></td></tr></table></figure><p>注意，以上流程，需要 BC 上的系统托管账户，和 BSC上的系统合约作为基础设施。</p><h1 id="链互操作">链互操作</h1><h2 id="平行链结构">平行链结构</h2><p>官方这张图很不错。 <img src="https://raw.githubusercontent.com/changbinhe/images/master/blog/blockchain-bsc-intro/para-chain.png" alt="para-chain"></p><p>注意 BSC Relayer 和 Oracle Relayer，分别负责把信息转发到 BSC 和BC。</p><p>下面先介绍这两个角色，再介绍具体的跨链操作方式。</p><blockquote><p>值得一提的是，币安在设计这两个角色的时候，已经考虑到了去中心化环境可能带来的问题和采取了一定的对策。</p><p>但是，这两个角色本身的合法性和提供的信息的验证问题，是不够清晰的。</p></blockquote><h2 id="bsc-replayer">BSC replayer</h2><p>BSC relayer 负责将信息从 BC传递到BSC。</p><p>需要存入一定量的 BNB 到BSC链上进行「注册」，BSC 只会接受注册的relayers。</p><ul><li>激励机制</li></ul><p>1）用户操作，由用户买单</p><p>2）系统同步，由 BSC 系统买单</p><ul><li>为了避免 relayers 垄断的情况</li></ul><p>1）奖励是批量分配</p><p>2）在批量中，奖励不是线性分配</p><h2 id="oracle-relayers">Oracle Relayers</h2><p>负责将信息从 BSC 传递到BC，消息本身需要经过BC 验证者的共识。</p><p>在提交之前，Oracle 需要等待足够的 BSC 区块确认（PoA 确认需要 1分钟）。</p><p>跨链奖励会成为区块奖励的一部分，分配给验证者。</p><blockquote><p>将来也会引入对 Oracle 的 slashing</p></blockquote><h2 id="bc-bsc">BC->BSC</h2><p>依赖BSC Replayers，消息将会进入到预编译的系统智能合约。</p><p>消息类型： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Token绑定</span><br><span class="line">转账</span><br><span class="line">错误处理</span><br><span class="line">验证者信息更新</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p><h2 id="bsc--bc">BSC ->BC</h2><p>如果是通过交易产生的跨链事件，其流程是这样的：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tx -> EVM -> event -> oracle</span><br></pre></td></tr></table></figure><p>每个BC 链验证者需要运行 oracle 进程作为 oracle relayer。</p><p>跨链消息包，也会被 BC 中的 validator进行投票，签名超过2/3即为合法。</p><h2 id="超时和错误处理">超时和错误处理</h2><p>这个在跨链协议中很重要，涉及到回滚等。</p><p>当某个 sequence 的 tx 卡主，超时之后，将会有一个 skipsequence交易出现，对卡主的 sequence 做出不可执行的标记。</p><p>社区决定如何处理。</p><blockquote><p>链上无法解决的问题，最终还是推到社区||-_-</p></blockquote><h1 id="staking-和治理">Staking 和治理</h1><p>BC 和 BSC 的Staking 的基本概念与其他基于POS的链没有大不一样，要点如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1）抵押，代理</span><br><span class="line"></span><br><span class="line">2）按照 token 排名，top n 作为验证者</span><br><span class="line"></span><br><span class="line">3）validator 分享收益给 delegator</span><br><span class="line"></span><br><span class="line">4）validator 会有被 slashing 的危险，delegator 需要分担</span><br><span class="line"></span><br><span class="line">5）token 有赎回期</span><br></pre></td></tr></table></figure><p>具体到 BC 和 BSC 的配合：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1）BC 上抵押和代理 BNB</span><br><span class="line"></span><br><span class="line">2）BSC 的 validator 由 BC 上的 staking 模块决定，UTC 00:00:00 发出跨链通讯</span><br><span class="line"></span><br><span class="line">3）BSC 将验证者工作的信息，通过跨链通讯回传到 BC</span><br><span class="line"></span><br><span class="line">4）在 BC 上进行 reward 分配</span><br></pre></td></tr></table></figure><h1 id="罚没">罚没</h1><p>基于 PoS 的公链，其活性需要全体 validator的诚实、如实工作保证的。</p><p>为了从经济学上推动这类行为，引入了罚没机制。</p><h2 id="双签">双签</h2><p>所谓的双签，是对于同一高度+同一个parent的区块进行多与一次的签名。任何第三方都可以，以 slash request 的方式发到BC 上。</p><p>1）从 validator 中移除——发出 update 事件</p><p>2）罚没一定量</p><p>3）一部分给提交者</p><p>4）另外的给验证者监管账户</p><h3 id="不稳定">不稳定</h3><p>一个内部合约，统计工作情况。</p><p>1）如果超过不工作阈值，其已得收益，将不会发给 BC，而是分2给其他的validators。</p><p>驱使运营不好的节点，delegator 将会离开</p><p>2）如果工作情况低于另外一个阈值，将会通知 BC，发生另外一个slashing</p><h1 id="总结">总结</h1><p>总的来讲，其技术结构和治理方式参考了一众跨链项目 （例如 cosmos 和polkadot），也参考了 DPoS 的一众项目（例如 EOS 和TRON）。机制设计上也留出了后续扩展的空间。在本文写作之时（2020-09），BSC上已运行了若干 DeFi 应用，这也是 BSC 的实现最初目标（承接DApp）的佐证。</p><p>在文章中，笔者也提出了一些疑问，例如 PoA 的区块确认时间过长，Relayer和 Oracle 本身的信息正确性问题等。</p><p>在单链技术还没有实质性突破的情况下（以太坊 2.0可能还需要若干年才能成熟，或者不会成功），这类平行扩展的思路，也不失为快速开展业务尝试的一种实干派做法。</p><h1 id="参考">参考</h1><p><a href="https://www.binance.org/">BC 官网</a></p><p><a href="https://dex-bin.bnbstatic.com/static/Whitepaper_%20Binance%20Smart%20Chain.pdf">BSC白皮书</a></p><p><a href="https://explorer.binance.org/">BC 浏览器</a></p><p><a href="https://bscscan.com/">BSC 浏览器</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;本文主要介绍的是中心化交易所币安（binance.com）在区块链上的一些工作，主要是介绍币安链（BC）和币安智能链（BSC），除了综述官方文档之外，也会加入一些个人的看法。&lt;/p&gt;
&lt;h1 id=&quot;出发点&quot;&gt;出发点&lt;/h1&gt;
&lt;p&gt;总所周知，币安基于Cosmos-SDk 
      
    
    </summary>
    
      <category term="blockchain" scheme="https://0xkevinhe.xyz/categories/blockchain/"/>
    
    
      <category term="blockchain" scheme="https://0xkevinhe.xyz/tags/blockchain/"/>
    
      <category term="DeFi" scheme="https://0xkevinhe.xyz/tags/DeFi/"/>
    
  </entry>
  
  <entry>
    <title>《影响力》读书笔记</title>
    <link href="https://0xkevinhe.xyz/reading-influence.html"/>
    <id>https://0xkevinhe.xyz/reading-influence.html</id>
    <published>2020-08-17T03:18:16.000Z</published>
    <updated>2023-09-27T07:01:22.190Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言">前言</h1><p>这是一本关于影响力和顺从的书，作者使用了大量的案例来说明影响力来源。</p><p>通过阅读这本书，可以为<code>运营活动</code>或者<code>销售技巧</code>寻找理论根据，做到知其所以然。</p><h1 id="信息卡片">🏷信息卡片</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">作者:[美] 罗伯特·西奥迪尼</span><br><span class="line">出版社: 中国人民大学出版社</span><br><span class="line">出品方: 湛庐文化</span><br><span class="line">原作名: Influence: The Psychology of Persuasion</span><br><span class="line">译者: 陈叙</span><br><span class="line">出版年: 2006-5</span><br><span class="line">页数: 353</span><br><span class="line">定价: 45.00元</span><br><span class="line">装帧: 平装</span><br><span class="line">丛书: 湛庐文化· 商业智慧</span><br><span class="line">ISBN: 9787300072487</span><br><span class="line">起止时间：       2020.07.15--2020.08.15</span><br><span class="line">阅读次数：       2</span><br><span class="line">推荐指数：      🌟🌟🌟🌟</span><br><span class="line">获奖情况：                                                                                                </span><br></pre></td></tr></table></figure><h1 id="写作背景">🌱写作背景</h1><p>作者社会心理学家，致力于影响力的研究</p><p>作者使用了所谓的参与式观察（间谍）参与到一些商品或者服务的销售工作中，以获取技巧</p><h1 id="原著呈现">📒原著呈现</h1><figure><img src="https://raw.githubusercontent.com/changbinhe/images/master/blog/reading-influence/mindmap.png" alt="mindmap"><figcaption aria-hidden="true">mindmap</figcaption></figure><h1 id="书摘批注">🖇书摘&批注</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line">p3-4：绿宝石价格提高了，反而销量好了；</span><br><span class="line"></span><br><span class="line">人在成长过程中，接受了观念，价格贵=东西好；</span><br><span class="line">调高了价格，触发了用户的顺从按钮；在这一点上，人类也是某种基于反应的动物——跟雌火鸡一样；</span><br><span class="line"></span><br><span class="line">p9：文明的进步，就是人们在不假思索中可以做的事情更多</span><br><span class="line">所谓的专家，也就是在不断的训练中，形成了对于工作的问题的肌肉记忆</span><br><span class="line"></span><br><span class="line">p15-16：对比原理</span><br><span class="line">先看霹雳娇娃，会影响给自己对象的打分；</span><br><span class="line">先兜售贵的商品、其次是便宜商品——可能会让总收益最大</span><br><span class="line">先给一个不好的方案、然后给一个正常的方案，可能会有助于方案的接受</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第二章：互惠——给予、索取、在索取</span><br><span class="line"></span><br><span class="line">p25：给对方寄贺卡，会受到很多回信</span><br><span class="line">在一个社交网络早期，主动加别人，会有一定的会加率</span><br><span class="line"></span><br><span class="line">p28：给对方带一瓶可乐，就可以获得更高的彩票销售</span><br><span class="line">不要忽视小恩小惠的作用；要习惯对别人施以援手——赠人玫瑰，手留余香</span><br><span class="line"></span><br><span class="line">p33：政府高层的相互投票和联合</span><br><span class="line">奥巴马和特朗普该多难啊！</span><br><span class="line"></span><br><span class="line">p35：安利臭虫</span><br><span class="line">所谓的试吃，也是这道理吧</span><br><span class="line"></span><br><span class="line">p38：人有送礼的义务、接受的义务、更有偿还的义务</span><br><span class="line">想起了老教父柯里昂</span><br><span class="line"></span><br><span class="line">p48：拒绝-后撤</span><br><span class="line">常见的销售技巧——漫天要价，坐地还钱</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第三章：承诺和一致性——脑子里的怪物</span><br><span class="line"></span><br><span class="line">p63：一开始就拒绝，比最后返回要容易——达芬奇</span><br><span class="line">至理名言，特别是对于推销cold call</span><br><span class="line"></span><br><span class="line">p67：所有人都一次次的骗自己，以便在做出选择之后，坚信自己做的没错</span><br><span class="line">you've got a dream, you've to protecet it</span><br><span class="line"></span><br><span class="line">p68：信仰、言行和行为前后一致不一致的人，会被看成脑筋混乱表里不一；言行高度一致多数跟个性坚强、智力出众；它是逻辑性、稳定性、诚实感的核心</span><br><span class="line">胡忠献的忠，岳飞的忠</span><br><span class="line">吴三桂所谓没有定力</span><br><span class="line"></span><br><span class="line">p70：关于冥思会和缴费</span><br><span class="line">超自然的方法，可能是唯一解药；</span><br><span class="line"></span><br><span class="line">p73：玩具销售商的策略</span><br><span class="line">为了保持淡季的销量</span><br><span class="line"></span><br><span class="line">p85：战俘营的做法</span><br><span class="line">以小积大</span><br><span class="line"></span><br><span class="line">p86：个人承诺防止撕毁合同</span><br><span class="line">自己说出的话，自己要遵守承诺</span><br><span class="line"></span><br><span class="line">p90：额外的努力，费尽努力得到的东西，人人往往格外珍视</span><br><span class="line">追姑娘丈母娘设置困难</span><br><span class="line">公司的严格面试，也是一种投名状</span><br><span class="line">其中的成员，会强烈的维护这种准入</span><br><span class="line">建立团队凝聚力和卓越感，入会活动要艰辛</span><br><span class="line"></span><br><span class="line">p100：内心的压力</span><br><span class="line">你得找一个有力的理由，让他大多数情况下都保持城市，可这个理由又不能强大到让孩子觉得，自己完全是为了它才诚实</span><br><span class="line">太强烈的惩罚，可能不会奏效</span><br><span class="line">要是说谎，我会失望的</span><br><span class="line">这个对于教育孩子很有意义，要让遵守规则成为孩子自身的习惯，而不是被强迫的</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第四章：社会认同——脑子里的怪物</span><br><span class="line"></span><br><span class="line">p120：依照别人意见行事</span><br><span class="line"></span><br><span class="line">盖得排行，大众点评</span><br><span class="line">街头围观，网红店雇人排队</span><br><span class="line"></span><br><span class="line">p138:寻求帮助</span><br><span class="line">找到特定的人寻求帮助</span><br><span class="line">旁</span><br><span class="line"></span><br><span class="line">p150:自杀新闻</span><br><span class="line">会导致更高的自杀率</span><br><span class="line"></span><br><span class="line">第五章：喜好——友好的盗贼</span><br><span class="line"></span><br><span class="line">p175:销售外表</span><br><span class="line">广告模特和销售人员都要漂亮</span><br><span class="line">p179:喜好</span><br><span class="line"></span><br><span class="line">广告的作用。第一次陌生，看了广告之后就觉得是名牌了</span><br><span class="line"></span><br><span class="line">p181:所谓的融合策略</span><br><span class="line">融合过程中导致的恶意，难道不是留下更大的影响么</span><br><span class="line"></span><br><span class="line">p184:拼图学习法</span><br><span class="line">竞争与合作</span><br><span class="line"></span><br><span class="line">p199:体育运动</span><br><span class="line">乒乓球、排球、奥运会等对国民认同的形成的作用</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第六章：权威——教化下的敬重</span><br><span class="line"></span><br><span class="line">p223:头衔</span><br><span class="line">都喜欢挂一堆头衔</span><br><span class="line">第七章：稀缺——数量少说了算</span><br><span class="line"></span><br><span class="line">p243:稀缺</span><br><span class="line">销售管用伎俩，create urgent</span><br><span class="line"></span><br><span class="line">p247:逆反心理</span><br><span class="line">有屏障，挑衅；测试界限；罗密欧朱丽叶，如果没有限制，可能不多久就分掉了</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p253:信息审查</span><br><span class="line">「禁书」，快要被删，这都有助于传播</span><br><span class="line">p260:参与竞争稀缺资源，有强大的刺激性</span><br><span class="line">所谓的竞雄？拍卖</span><br></pre></td></tr></table></figure><h1 id="总结感悟">🙋‍♀️总结感悟</h1><p>顺从的力量，来自大量「正统」观念影响</p><p>从理论上了解影响力的来源：互惠、承诺和一致性、社会认同、喜好、权威、稀缺</p><p>验证和对照了一些日常的销售和运营策略</p><h1 id="他山之石">👯‍♀️他山之石</h1><p>🎥多媒体资料</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;前言&quot;&gt;前言&lt;/h1&gt;
&lt;p&gt;这是一本关于影响力和顺从的书，作者使用了大量的案例来说明影响力来源。&lt;/p&gt;
&lt;p&gt;通过阅读这本书，可以为&lt;code&gt;运营活动&lt;/code&gt;或者&lt;code&gt;销售技巧&lt;/code&gt;寻找理论根据，做到知其所以然。&lt;/p&gt;
&lt;h1 id=&quot;
      
    
    </summary>
    
      <category term="reading" scheme="https://0xkevinhe.xyz/categories/reading/"/>
    
    
      <category term="社会心理学" scheme="https://0xkevinhe.xyz/tags/%E7%A4%BE%E4%BC%9A%E5%BF%83%E7%90%86%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>开源许可证介绍与项目实战</title>
    <link href="https://0xkevinhe.xyz/open-source-license.html"/>
    <id>https://0xkevinhe.xyz/open-source-license.html</id>
    <published>2020-04-28T03:18:16.000Z</published>
    <updated>2023-09-27T07:01:22.160Z</updated>
    
    <content type="html"><![CDATA[<h1 id="介绍">介绍</h1><p>在项目中第三方代码的时候，要注意源码许可证问题，因为这涉及到：</p><ul><li>使用和修改的条件是什么？</li><li>商用和分发的条件是什么？</li><li>本项目开源后使用什么许可证？</li></ul><p>本文将简要介绍对许可证（license）的理解，着重介绍一个实战项目处理方式。</p><h1 id="许可证介绍">许可证介绍</h1><p>许可证的内容，其实是博大精深。</p><p>首先许可证的种类特别的多，其次不同的许可的条款和细节也特别的多。</p><p>下面主要是介绍若干<code>主流且具有代表性</code>的许可证。</p><blockquote><p>主要参考了<a href="https://www.ruanyifeng.com/blog/2017/10/open-source-license-tutorial.html">开源许可证教程-阮一峰的网络日志</a></p></blockquote><h2 id="名词解释">名词解释</h2><ul><li><p>分发</p><p>将版权作品从一个人转移到另外一个人；例如提供给别人；如果是本公司使用，不算分发。</p></li><li><p>传染</p><p>一个项目用到了某个许可证的代码，在某些条件下（例如分发），这个项目本身也需要使用这种许可证</p></li><li><p>许可证版本</p><p>同一个许可证，有版本号之间的区别，例如 GPL 有 v1/v2/v3。</p></li></ul><h2 id="宽松的许可证">宽松的许可证</h2><p>包含 MIT/ISC/BSD/Apache等，基本上这类许可证，是可以放心使用。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">（1）BSD（二条款版）</span><br><span class="line"></span><br><span class="line">分发软件时，必须保留原始的许可证声明。</span><br><span class="line"></span><br><span class="line">（2） BSD（三条款版）</span><br><span class="line"></span><br><span class="line">分发软件时，必须保留原始的许可证声明。不得使用原始作者的名字为软件促销。</span><br><span class="line"></span><br><span class="line">（3）MIT</span><br><span class="line"></span><br><span class="line">分发软件时，必须保留原始的许可证声明，与 BSD（二条款版）基本一致。</span><br><span class="line"></span><br><span class="line">（4）Apache 2</span><br><span class="line"></span><br><span class="line">分发软件时，必须保留原始的许可证声明。凡是修改过的文件，必须向用户说明该文件修改过；没有修改过的文件，必须保持许可证不变。</span><br></pre></td></tr></table></figure><h3 id="copyleft-许可证">Copyleft 许可证</h3><p>代码可以随意复制，有如下前提：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- 如果分发二进制格式，必须提供源码</span><br><span class="line">- 修改后的源码，必须与修改前保持许可证一致</span><br><span class="line">- 不得在原始许可证以外，附加其他限制</span><br></pre></td></tr></table></figure><p>核心在于，修改后的代码，不得闭源。</p><ul><li>AGPL</li></ul><p>最严格的GPL，除非获得商业授权，否则无论以何种方式修改或者使用代码，都需要开源。</p><blockquote><p>云服务使用AGPL 的源码，不构成分发，也也需要开源</p></blockquote><ul><li>GPL</li></ul><p>如果分发软件，则使用和修改都必须开源，整个项目都必须采用GPL许可。</p><ul><li>LGPL</li></ul><p>分发时，如果是使用动态类库的方式引用，可以不开源</p><ul><li>MPL</li></ul><p>分发时，只要该许可证的代码在单独的文件中，新增的其他文件可以不用开源。</p><blockquote><p>无论是商业应用，还是开源项目，在采用AGPL/GPL/LGPL/MPL都要特别的小心。</p></blockquote><h1 id="许可证检测">许可证检测</h1><p>介绍两个工具，分别检测代码文件和依赖的 license。</p><h2 id="检测代码">检测代码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get -u github.com/google/addlicense</span><br></pre></td></tr></table></figure><p>可以递归检测当前目录下的所有代码文件，许可证声明的情况，例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">addlicense -check ./ |sort > lc.txt </span><br></pre></td></tr></table></figure><p>可以把未添加许可证的文件都输出到lc.txt 文件中，方便后续进行检查。</p><h2 id="检测依赖库">检测依赖库</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get -u github.com/google/go-licenses</span><br></pre></td></tr></table></figure><p>查看一个依赖库所使用的版权信息：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go-licenses csv repo</span><br></pre></td></tr></table></figure><p>可以通过一个这个脚本项目进行批量测试：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cat dep.txt |while read line</span><br><span class="line">do </span><br><span class="line">echo "start checking package $line"</span><br><span class="line">go-licenses csv $line</span><br><span class="line">echo ""</span><br><span class="line">done</span><br></pre></td></tr></table></figure><h2 id="许可证添加">许可证添加</h2><p>笔者主要使用 idea 的 IDE 进行程序开发，它有管理版权信息的功能：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Preference->editor->Copyright</span><br></pre></td></tr></table></figure><p>可以添加不同的 Profiles，然后使用 IDE的功能进行自动添加和更新。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1）设置默认 copyright</span><br><span class="line">preference->editor->Copyright</span><br><span class="line">设置 default project copyright，选中一种配置，这个可能会根据不同的文件需要切换</span><br><span class="line"></span><br><span class="line">2）选中代码文件或者文件夹</span><br><span class="line"></span><br><span class="line">3）菜单栏->Code->Update Copyright</span><br></pre></td></tr></table></figure><h1 id="项目实战">项目实战</h1><p>下文介绍对于一个实际项目进行许可证声明。</p><h2 id="项目背景">项目背景</h2><p>该项目主语言是 golang，采用了自某 LGPL的项目的一部分类库作为基础代码。</p><h2 id="版权主体">版权主体</h2><p>也就是版权声明的第一行的关键信息，例如：</p><ul><li>go-ethereum</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Copyright 2016 The go-ethereum Authors</span><br></pre></td></tr></table></figure><ul><li>go-algorand</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Copyright (C) 2019-2020 Algorand, Inc.</span><br></pre></td></tr></table></figure><p>可以选择是作者主体，或者公司主体。</p><h2 id="项目-license">项目 license</h2><p>由于该项目的代码，部分使用了修改了 LGPL 项目代码作为基础工具。</p><p>根据 LGPL 的规定，本项目也需要使用 LGPL 作为 license。</p><h2 id="版权声明">版权声明</h2><p>声明版权，一般两部分：</p><h4 id="项目级别的-license-文件">1）项目级别的 LICENSE 文件</h4><p>由于大部分的许可证都是控制包级别的许可，所以这种方式也足够</p><h4 id="代码级别的-copyright-文件头">2）代码级别的 copyright 文件头</h4><p>每一个原创的文件都设置了版权信息</p><h2 id="项目级别的-license">项目级别的 license</h2><p>一般而言，是找到你的 license 的文本，将文件放置于项目根目录。</p><blockquote><p>不同许可证可能有点不一样</p></blockquote><p>一般而言，在 github 建立公开项目的时候，会提示选择一个 license。</p><p>如果初始化忘记了，也可以web界面上，新建一个名字是<code>LICENSE</code>的文件，来显式触发选择license。</p><h2 id="代码级别的-copyright-文件头-1">代码级别的 copyright 文件头</h2><p>使用第三方代码，主要分为，<code>fork 引用</code> 和<code>library 依赖</code>。</p><p>fork 是指把代码直接放到了代码库中，修改或者不修改。</p><p>library 是库依赖，例如通过 go.mod 的方式进行依赖。</p><h3 id="fork-引用">fork 引用</h3><p>代码分类 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1）项目原创文件</span><br><span class="line"></span><br><span class="line">2）项目修改第三方库的文件</span><br><span class="line"></span><br><span class="line">3）项目直接引用第三方库的文件</span><br><span class="line"></span><br><span class="line">4）fork 过来的开源库</span><br><span class="line">可能存在包内 license，单文件可能没有copyright</span><br><span class="line"></span><br><span class="line">5）忽略 license 文件的内容</span><br><span class="line"></span><br><span class="line">非 golang 文件</span><br><span class="line">gencode 生成的以 gen_开头的文件</span><br><span class="line">其他自动生成的文件</span><br></pre></td></tr></table></figure></p><p>有了如上的分类，你就可以使用 IDE 创建多个不同的 Copyright Profiles来处理不同的文件了。</p><p>结合 addlicense 工具，相信这部分工作将可以顺利完成。</p><h4 id="library-依赖">library 依赖</h4><p>使用上述的依赖检测工具，查看是否有不合适的许可证。</p><blockquote><p>如果一个依赖库，license 不是MIT/ISC/BSD/Apache其中的一种，那就要小心了！</p></blockquote><h1 id="tbd-topics">TBD-Topics</h1><p>有一些话题需要进一步讨论：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1）如果项目源码计划商用，如何处理？</span><br></pre></td></tr></table></figure><h1 id="总结">总结</h1><p>本文简要介绍了license的原理，着重介绍了项目实战，希望对读者有启发，欢迎讨论！</p><h1 id="参考">参考</h1><p>https://www.ruanyifeng.com/blog/2017/10/open-source-license-tutorial.html</p><p>https://www.gnu.org/licenses/gpl-faq.html</p><p>https://choosealicense.com/</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;介绍&quot;&gt;介绍&lt;/h1&gt;
&lt;p&gt;在项目中第三方代码的时候，要注意源码许可证问题，因为这涉及到：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;使用和修改的条件是什么？&lt;/li&gt;
&lt;li&gt;商用和分发的条件是什么？&lt;/li&gt;
&lt;li&gt;本项目开源后使用什么许可证？&lt;/li&gt;
&lt;/ul&gt;
&lt;p
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>macOS 作为服务器</title>
    <link href="https://0xkevinhe.xyz/osx-as-server.html"/>
    <id>https://0xkevinhe.xyz/osx-as-server.html</id>
    <published>2017-12-04T03:21:55.000Z</published>
    <updated>2023-09-27T07:01:22.161Z</updated>
    
    <content type="html"><![CDATA[<p>因为业务需要，我司有若干台服务器 Mac作为服务器。下面总结一下注意事项，作为记录。</p><h1 id="取消系统休眠">取消系统休眠</h1><p>曾经在这个问题上困扰很长时间。在升级了 <code>macOS High Sierra</code>之后，发现之前能够正常运行的程序出现问题。</p><p>具体表现是：</p><ol type="1"><li>ssh 登出之后不久，线上就开始报警</li><li>登陆进去查看 log，发现程序又是正常的</li><li>socket 连接提示传输错误</li><li>程序并没有 exit</li></ol><p>一开始怀疑是后台程序的权限问题，于是更新了后台程序的 launchd配置，确保了使用 root 用户运行，没有效果。</p><p>后来灵机一动，去具体分析程序的log，发现只要用户登出，输出就会停止，看起来是程序被挂起了。</p><p>分析可能被挂起的原因，只可能是系统休眠了。</p><p>直接登陆 GUI 系统，在系统设置中将节能设置改成：</p><figure><img src="https://raw.githubusercontent.com/changbinhe/images/master/17-12-4/97778894.jpg" alt="节能设置"><figcaption aria-hidden="true">节能设置</figcaption></figure><p>生效了！</p><h1 id="守护进程">守护进程</h1><p>作为服务器，大多是需要运行守护进程。这就需要用到<code>launchd</code>，它能确保这是确保设备重启之后，守护能够自动运行。</p><blockquote><p><a href="https://en.wikipedia.org/wiki/Launchd">launchd</a>是一个开源框架，用于控制守护进程、程序、或者脚本，在 Mac OS X Tiger中引入。</p></blockquote><p>使用 launchd，主要需要注意下面几点：</p><ul><li>正确区分系统全局的守护和用户相关的守护进程</li></ul><table><colgroup><col style="width: 33%"><col style="width: 33%"><col style="width: 33%"></colgroup><thead><tr class="header"><th>类型</th><th>路径</th><th>运行用户</th></tr></thead><tbody><tr class="odd"><td>全局的守护进程</td><td>/Library/LaunchDaemons</td><td>root 用户或者使用 UserName key 对应的用户</td></tr><tr class="even"><td>系统的守护进程</td><td>/System/Library/LaunchDaemons</td><td>root 用户或者使用</td></tr></tbody></table><p>一般而言，把 plist 文件放到 <code>/Library/LaunchDaemons</code>即可。</p><ul><li>正确设置 plist 文件的权限</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-rw-r--r--  1 wheel  947 12  1 14:51 name_of_the_config.plist</span><br></pre></td></tr></table></figure><p>也即是： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">用户：root</span><br><span class="line">组：wheel</span><br><span class="line">权限： 0644</span><br></pre></td></tr></table></figure></p><ul><li>被运行的程序，需要是处于前台运行，否则 launchd会认为程序已经退出</li><li>如果需要全局性的守护进程，需要使用 sudo 运行</li></ul><h2 id="参考文档">参考文档</h2><p><a href="http://www.launchd.info/">http://www.launchd.info/</a></p><p><a href="https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man5/launchd.plist.5.html#//apple_ref/doc/man/5/launchd.plist">launchd.plist</a></p><p><a href="https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man1/launchctl.1.html#//apple_ref/doc/man/1/launchctl">launchctl</a></p><h1 id="内网穿透">内网穿透</h1><p>很多时候，macOS服务器并不是托管在机房，而是在某个比较方便管理的地方——例如办公室。</p><p>办公室的网络环境又千奇百怪，往往没有固定的外网 ip，往往是处于 NAT的网络环境或者是防火墙内，如果服务出现了问题，总不能直接跑去办公室吧。</p><p>尝试过各种 VPN 方案，动静太大，不稳定，放弃。下面介绍一下 <a href="https://github.com/inconshreveable/ngrok">Ngrok</a>。</p><p>官网简介：</p><blockquote><p>Secure tunnels to localhost ”I want to expose a local server behind aNAT or firewall to the internet.”</p></blockquote><p>基本的构架图如下：</p><figure><img src="https://raw.githubusercontent.com/changbinhe/images/master/17-12-4/55782772.jpg" alt="Ngrok"><figcaption aria-hidden="true">Ngrok</figcaption></figure><p>这款软件是 C/S结构，使用服务器作为中转，只需要设置好服务器和客户端，不需要在路由器做任何处理。<code>软件的2.x 不开源，github 上只有 1.x 版本</code>，已经足够。</p><p>使用方式，参考<a href="https://imququ.com/post/self-hosted-ngrokd.html">imququ的博客</a>。</p><p>基本流程是： 1. clone 源码 2. 生成证书，拷贝 <code>base.pem</code> 到<code>assets/client/tls/ngrokroot.crt</code> 下 3. 运行<code>make release-server release-client</code> 4. <code>bin</code> 的ngrokd 和 ngrok 分别是服务器端和客户端</p><h1 id="总结">总结</h1><p>以上是对于 <code>macOS</code> 作为服务器的一些注意事项。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;因为业务需要，我司有若干台服务器 Mac
作为服务器。下面总结一下注意事项，作为记录。&lt;/p&gt;
&lt;h1 id=&quot;取消系统休眠&quot;&gt;取消系统休眠&lt;/h1&gt;
&lt;p&gt;曾经在这个问题上困扰很长时间。在升级了 &lt;code&gt;macOS High Sierra&lt;/code&gt;
之后，发现之前
      
    
    </summary>
    
      <category term="code" scheme="https://0xkevinhe.xyz/categories/code/"/>
    
    
      <category term="macOS" scheme="https://0xkevinhe.xyz/tags/macOS/"/>
    
  </entry>
  
  <entry>
    <title>Spring Cloud 配置中心</title>
    <link href="https://0xkevinhe.xyz/spring-cloud-config.html"/>
    <id>https://0xkevinhe.xyz/spring-cloud-config.html</id>
    <published>2017-10-13T15:18:16.000Z</published>
    <updated>2023-09-27T07:01:22.197Z</updated>
    
    <content type="html"><![CDATA[<h1 id="闲话配置">闲话配置</h1><p>老司机都喜欢在程序设计中尽可能的把各种参数做成可配置的，等到产品需求发生改动的时候，优雅的修改一行配置，重新加载一次配置，就满足了需求。</p><blockquote><p>配置（Configuration）是不修改代码的情况下，对程序的运行调整的能力。</p></blockquote><p>简单来讲，配置可以分成两类：</p><ol type="1"><li>系统配置：包括线程池大小、数据库连接等，变化频率较低</li><li>业务配置：功能开关，功能参数等，变化较为频繁</li></ol><p>程序的配置一般而言，分为几个环境：</p><ol type="1"><li>开发环境</li><li>测试环境</li><li>生产环境</li></ol><p>这几个环境的配置是有差异的，所以配置管理功能应当能够根据当前环境读取对应的配置。</p><p>前面提到的不修改代码，只是最低要求，相当多的情况下，程序是不能停机的，这就提出了热更新的需求。</p><p>另外，配置的修改应该是有记录可追溯的。</p><h1 id="spring-boot-的配置管理">Spring Boot 的配置管理</h1><p>Spring 实现了非常友好的配置读取方式，</p><p>Spring Boot 程序默认使用 application.properties 进行配置。</p><p>例如一个参数：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag=0</span><br></pre></td></tr></table></figure><p>在程序中可以通过：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@Value("${flag})</span><br><span class="line">int flag;</span><br></pre></td></tr></table></figure><p>来读取。</p><p>也可以通过设置多个配置文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">application.properties</span><br><span class="line">application-dev.properties</span><br><span class="line">application-test.properties</span><br><span class="line">application-prod.properties</span><br></pre></td></tr></table></figure><p>application-dev.properties <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag=1</span><br></pre></td></tr></table></figure> application-test.properties<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag=2</span><br></pre></td></tr></table></figure></p><p>application-prod.properties <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag=3</span><br></pre></td></tr></table></figure></p><p>和在 application.properties 中声明当前的活跃的 profile：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.profiles.active=dev</span><br></pre></td></tr></table></figure><p>来实现根据运行环境切换配置信息。</p><p>以上只是 Spring 强大的配置能力的冰山一角，有兴趣可以参考<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html">外部配置文档</a>。</p><h2 id="这还不够">这还不够</h2><p>其实以上描述的 Spring Boot的配置能力已经很强了，但是有个很致命的问题——无法热更新。</p><p>如果非得实现热更新，那可以把配置做成 JSON 文件，再实现一个endpoint，重新读取一次配置。</p><p>假设有一千个实例呢？</p><h1 id="spring-cloud-config">Spring Cloud Config</h1><p>项目 github：<a href="https://github.com/spring-cloud/spring-cloud-config">https://github.com/spring-cloud/spring-cloud-config</a></p><p>简介：External configuration (server and client) for Spring Cloud</p><p>这个项目包含两部分：</p><ul><li>Server</li></ul><p>负责从 git/svn 等版本管理系统中读取配置，并以 http的方式提供服务。</p><ul><li>Client</li></ul><p>根据客户端配置，从指定的 Server 中读取对应配置，并且与 Spring 本身的PropertyResource 和 Environment无缝结合。同时，提供了统一的方式进行配置热更新。</p><p>对于这个系统的基础配置和运行，可以参阅下面两个 url：</p><p><a href="https://spring.io/guides/gs/centralized-configuration/">https://spring.io/guides/gs/centralized-configuration/</a></p><p><a href="http://blog.didispace.com/spring-cloud-starter-dalston-3/">http://blog.didispace.com/spring-cloud-starter-dalston-3/</a></p><h2 id="实操进阶">实操进阶</h2><h3 id="热更新">热更新</h3><p>Spring Cloud Config 实现了非常优雅的热更新。</p><ul><li>客户端的配置 Bean 添加 <span class="citation" data-cites="RefreshScope">@RefreshScope</span></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">@RefreshScope</span><br><span class="line">public class ConsumeConfig {</span><br><span class="line"></span><br><span class="line">    @Value("${consume.desc}")</span><br><span class="line">    private String consumeDesc;</span><br><span class="line">    </span><br><span class="line">    @Value("#{'${api.server.round.card}'.split(',')}")</span><br><span class="line">    private List<String> cardList;</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>在配置这个注解之后，调用客户端的 /refresh endpoint，这个 Bean就会刷新，同时个 Bean 的依赖方下次方法调用时也会更新 Bean 引用。</p><p>有些时候，你需要监听这个更新事件，把拿到的最新配置，重新初始化一些部件。那你可以添加：<code>@EventListener(EnvironmentChangeEvent.class)</code> 这个annotation。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class ConsumeService {</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    ConsumeConfig consumeConfig;</span><br><span class="line"></span><br><span class="line">    @EventListener(EnvironmentChangeEvent.class)</span><br><span class="line">    void onEnvChange() {</span><br><span class="line">        //do re-init stuff</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="添加权限">添加权限</h3><p>Config Server 任何人都可以通过 http访问配置，这个不大好，建议加上认证，最简单是使用 Spring-Security添加一个 basic authentication。</p><ul><li>服务器端配置</li></ul><p>build.gradle 添加依赖： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies {</span><br><span class="line">    compile('org.springframework.boot:spring-boot-starter-security')</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p><p>application.properties 添加密码（用户名默认是 user）：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">security.user.password=xxx</span><br></pre></td></tr></table></figure></p><p>重启服务器，再次通过 http 访问配置的时候需要验证。</p><ul><li>客户端配置</li></ul><p>服务器端做了验证，那客户端也需要添加相应的配置：</p><p>bootstrap.yml <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line"> application:</span><br><span class="line">  name: application</span><br><span class="line"> cloud:</span><br><span class="line">  config:</span><br><span class="line">   uri: http://yourhost.com</span><br><span class="line">   profile: dev</span><br><span class="line">   username: user</span><br><span class="line">   password: xxx</span><br></pre></td></tr></table></figure></p><h3 id="加载多组配置文件">加载多组配置文件</h3><p>很多时候，为了避免 application.properties过于臃肿，你可能需要把一些配置文件拆出来，例如专门负责邀请奖励的配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">invite.properties</span><br><span class="line">invite-dev.properties</span><br><span class="line">invite-test.properties</span><br><span class="line">invite-prod.properties</span><br></pre></td></tr></table></figure><p>同样，也区分了多个环境。</p><p>那在使用 Spring Cloud 的时候如何读取这个文件呢？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line"> application:</span><br><span class="line">  name: application,invite</span><br></pre></td></tr></table></figure><p>注意上面的 application.name 是以逗号分隔的两组配置名称。</p><h1 id="一些问题">一些问题</h1><h2 id="eventlistener-与-spel"><span class="citation" data-cites="EventListener">@EventListener</span> 与 SpEL</h2><p>我在实际使用中发现，在事件监听函数中，使用更新后的配置的时候：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Value("${consume.desc}")</span><br><span class="line">private String consumeDesc;</span><br><span class="line"></span><br><span class="line">@Value("#{'${api.server.round.card}'.split(',')}")</span><br><span class="line">private List<String> cardList;</span><br></pre></td></tr></table></figure><p>第一个配置是使用 <span class="citation" data-cites="Value">@Value</span> 绑定一个字符串类型，第二个配置是使用<span class="citation" data-cites="Value">@Value</span> 中的 SpEL去将配置中的字符串，切割成 List。</p><p>我发现第二个，无法切割成功。试验了多次，还没有找到答案。我已经在Spring Cloud Config 的 github 上提交了 <a href="https://github.com/spring-cloud/spring-cloud-config/issues/821">issue</a>。</p><p>如果有了解这个的，请不吝赐教。</p><blockquote><p>update 2017-10-26 * 我在 github 上提交了 issue：https://github.com/spring-cloud/spring-cloud-config/issues/821得到回复：<code>We have only ever documented that placeholders ${} work, not SpEL.</code></p></blockquote><h2 id="权限管理">权限管理</h2><p>在不做二次开发的情况下，这个配置中心的数据是对所有的 client开放的。某些情况下，这种设定并不合适。</p><h2 id="json-文件的读取和解析">JSON 文件的读取和解析</h2><p>Spring Cloud Config 本身是可以通过 http 来提供 JSON文件的访问的，但是Spring Boot 原生并不支持 JSON 配置的读取和解析。</p><h1 id="相关选择">相关选择</h1><p>其实配置管理工具，选择还是不少的，下面列举一下。</p><ul><li>owner http://owner.aeonbits.org/</li></ul><p>配置文件管理，可以热更新，跟 Spring 没有绑定。</p><ul><li>cfg4j http://www.cfg4j.org/</li></ul><p>专注管理配置文件，也可以实现热更，跟 Spring 没有绑定。</p><ul><li>applolo https://github.com/ctripcorp/apollo</li></ul><p>携程开源的，功能很全</p><ul><li>disconf https://github.com/knightliao/disconf</li></ul><p>百度的一位工程师的开源项目，功能也很全</p><ul><li>diamond https://github.com/takeseem/diamond</li></ul><p>来自阿里的开源，有些日子了</p><h1 id="参考文献">参考文献</h1><p><a href="http://blog.didispace.com/spring-cloud-starter-dalston-3/">http://blog.didispace.com/spring-cloud-starter-dalston-3/</a></p><p><a href="http://cloud.spring.io/spring-cloud-config/single/spring-cloud-config.html">http://cloud.spring.io/spring-cloud-config/single/spring-cloud-config.html</a></p><p><a href="http://jm.taobao.org/2016/09/28/an-article-about-config-center/">http://jm.taobao.org/2016/09/28/an-article-about-config-center/</a></p><p><a href="https://blog.coding.net/blog/spring-cloud-config">https://blog.coding.net/blog/spring-cloud-config</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;闲话配置&quot;&gt;闲话配置&lt;/h1&gt;
&lt;p&gt;老司机都喜欢在程序设计中尽可能的把各种参数做成可配置的，等到产品需求发生改动的时候，优雅的修改一行配置，重新加载一次配置，就满足了需求。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;配置（Configuration）是不修改代码的
      
    
    </summary>
    
      <category term="code" scheme="https://0xkevinhe.xyz/categories/code/"/>
    
    
      <category term="Spring" scheme="https://0xkevinhe.xyz/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>小工具-sips-图片批量转大小</title>
    <link href="https://0xkevinhe.xyz/utility-sips.html"/>
    <id>https://0xkevinhe.xyz/utility-sips.html</id>
    <published>2017-05-16T03:18:16.000Z</published>
    <updated>2023-09-27T07:01:22.198Z</updated>
    
    <content type="html"><![CDATA[<h1 id="家有设计师">家有设计师</h1><p>我家夫人是一位设计师，平时少不了将一张大图导出成多种规格的小图的脏活累活。</p><p>看了她导了好几次，实在不能忍。得发挥程序员的能动性，做个小工具。</p><h1 id="调研">调研</h1><p><a href="http://www.imagemagick.org/script/index.php">imagemagick</a>是一个很好的工具，支持多个平台，功能丰富强大。考虑了一下，如果这个小工具还需要用户安装依赖的话，显然提高了使用门槛。</p><p>设计师们大多在 MacOS下工作，最好是运用这个平台下现成的工具包。搜索了一下，发现今天的主角：<a href="https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man1/sips.1.html">sips</a>。</p><p>sips具有很友好的使用接口，可以实现大小转换、旋转、翻转等。这里我只需要大小转换功能，主要是如下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sips -Z 100 input.png --out output.png</span><br></pre></td></tr></table></figure><p>上面的例子可以将 <code>input.png</code>图片最大边调整成100像素，等比缩放。</p><h1 id="实践">实践</h1><p>整个工具包含如下几个文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── convert.sh//转换程序</span><br><span class="line">├── icon.png//输入文件</span><br><span class="line">└── sizes.txt//目标尺寸</span><br></pre></td></tr></table></figure><p>使用步骤如下：</p><ol type="1"><li>替换 icon.png 文件为需要转换的文件</li><li>修改 sizes.txt 文件，编辑目标尺寸，每一行为一个尺寸</li><li>控制台运行 <code>./convert.sh</code> 即可</li></ol><p>为了很方便的让设计师同学使用这个工具，我在她的电脑上安装了一个 <a href="https://github.com/jbtule/cdto">cdto</a> 工具，可以在当前 finder目录下打开 控制台。还把这个工具拖到了 finder 的左侧快捷方式。PS:用户接口要友好。。。</p><h1 id="源码">源码</h1><p>源码和配置文件都放在 <a href="https://github.com/kevinho/image-resizer">github</a> 上。</p><h1 id="todo">TODO</h1><ol type="1"><li>目前只支持 png</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;家有设计师&quot;&gt;家有设计师&lt;/h1&gt;
&lt;p&gt;我家夫人是一位设计师，平时少不了将一张大图导出成多种规格的小图的脏活累活。&lt;/p&gt;
&lt;p&gt;看了她导了好几次，实在不能忍。得发挥程序员的能动性，做个小工具。&lt;/p&gt;
&lt;h1 id=&quot;调研&quot;&gt;调研&lt;/h1&gt;
&lt;p&gt;&lt;a hre
      
    
    </summary>
    
      <category term="code" scheme="https://0xkevinhe.xyz/categories/code/"/>
    
    
      <category term="产品" scheme="https://0xkevinhe.xyz/tags/%E4%BA%A7%E5%93%81/"/>
    
      <category term="用户体验" scheme="https://0xkevinhe.xyz/tags/%E7%94%A8%E6%88%B7%E4%BD%93%E9%AA%8C/"/>
    
  </entry>
  
</feed>
